/*! For license information please see rmp-vast.esm.js.LICENSE.txt */
var e,t,i,s,n={56:function(e,t,i){e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},63:function(e,t,i){var s=i(354),n=i.n(s),r=i(314),a=i.n(r),o=i(417),l=i.n(o),d=new URL(i(669),i.b),h=new URL(i(824),i.b),c=a()(n()),p=l()(d),u=l()(h);c.push([e.id,'@charset "UTF-8";\n\n/* shared CSS with Radiant Media Player */\n.rmp-container {\n  position: relative;\n  text-align: center;\n  outline: none;\n  background: #000;\n  padding: 0;\n  border: none;\n  display: block;\n  font-size: 14px;\n  max-width: none;\n  max-height: none;\n  overflow: hidden;\n  line-height: 1;\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.rmp-container * {\n  box-sizing: border-box;\n}\n\n.rmp-video,\n.rmp-content {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  display: block;\n}\n\n.rmp-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n  display: block;\n  text-align: initial;\n}\n\n.rmp-fullscreen-on {\n  position: fixed !important;\n  width: 100% !important;\n  height: 100% !important;\n  background: #000 !important;\n  overflow: hidden !important;\n  z-index: 9999 !important;\n  top: 0;\n  left: 0;\n}\n\n/* specific CSS to rmp-vast */\n.rmp-vpaid-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n  display: block;\n  text-align: initial;\n}\n\n.rmp-ad-vast-video-player {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  display: block;\n  cursor: pointer;\n  pointer-events: none;\n}\n\n.rmp-ad-container-icons {\n  position: absolute;\n  display: block;\n  cursor: pointer;\n}\n\n.rmp-ad-container-skip {\n  position: absolute;\n  right: 0;\n  bottom: 44px;\n  width: 160px;\n  height: 40px;\n  line-height: 38px;\n  text-align: center;\n  cursor: pointer;\n  background-color: #333;\n  border: 1px solid #333;\n  transition-property: border-color;\n  transition-duration: 0.4s;\n  transition-timing-function: ease-in;\n}\n\n.rmp-ad-container-skip:hover {\n  border-color: #000;\n}\n\n.rmp-ad-container-skip-waiting {\n  width: 100%;\n  position: absolute;\n  padding: 0 2px;\n  color: #cfcfcf;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.rmp-ad-container-skip-message {\n  width: 65%;\n  position: absolute;\n  left: 5%;\n  color: #FFF;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.rmp-ad-container-skip-icon {\n  position: absolute;\n  left: 75%;\n  width: 20%;\n  background-image: url('+p+");\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.7;\n  transition-property: opacity;\n  transition-duration: 0.4s;\n  transition-timing-function: ease-in;\n}\n\n.rmp-ad-container-skip:hover .rmp-ad-container-skip-icon {\n  opacity: 1;\n}\n\n.rmp-ad-non-linear-container {\n  position: absolute;\n  text-align: center;\n  left: 50%;\n  bottom: 0;\n  transform: translate(-50%, 0);\n}\n\n.rmp-ad-non-linear-anchor:link,\n.rmp-ad-non-linear-anchor:visited,\n.rmp-ad-non-linear-anchor:hover,\n.rmp-ad-non-linear-anchor:active {\n  text-decoration: none;\n}\n\n.rmp-ad-non-linear-creative {\n  position: relative;\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n}\n\n.rmp-ad-non-linear-close { \n  right: 0;\n  top: 0;\n  position: absolute;\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  background-color: #000;\n  background-image: url("+u+");\n  background-size: cover;\n  border: 4px solid #000;\n}\n\n.rmp-ad-click-ui-mobile {\n  border: 2px solid #fff;\n  background: rgba(0, 0, 0, 0.4);\n  color: #fff;\n  display: block;\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  font-size: 18px;\n  width: 112px;\n  height: 34px;\n  text-decoration: none;\n  text-align: center;\n  line-height: 30px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.4);\n}\n\n.rmp-ad-click-ui-mobile:visited,\n.rmp-ad-click-ui-mobile:hover,\n.rmp-ad-click-ui-mobile:active {\n  color: #fff;\n  text-decoration: none;\n}\n\n.rmp-linear-simid-creative {\n  position: absolute;\n  top: 0;\n  border-width: 0;\n  width: 100%;\n  height: 100%;\n}\n","",{version:3,sources:["webpack://./src/css/rmp-vast.css"],names:[],mappings:"AAAA,gBAAgB;;AAEhB,yCAAyC;AACzC;EACE,kBAAkB;EAClB,kBAAkB;EAClB,aAAa;EACb,gBAAgB;EAChB,UAAU;EACV,YAAY;EACZ,cAAc;EACd,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,cAAc;EACd,sBAAsB;EACtB,yCAAyC;AAC3C;;AAEA;EACE,sBAAsB;AACxB;;AAEA;;EAEE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,OAAO;EACP,MAAM;EACN,SAAS;EACT,UAAU;EACV,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,SAAS;EACT,UAAU;EACV,WAAW;EACX,YAAY;EACZ,aAAa;EACb,cAAc;EACd,mBAAmB;AACrB;;AAEA;EACE,0BAA0B;EAC1B,sBAAsB;EACtB,uBAAuB;EACvB,2BAA2B;EAC3B,2BAA2B;EAC3B,wBAAwB;EACxB,MAAM;EACN,OAAO;AACT;;AAEA,6BAA6B;AAC7B;EACE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,SAAS;EACT,UAAU;EACV,WAAW;EACX,YAAY;EACZ,aAAa;EACb,cAAc;EACd,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,OAAO;EACP,MAAM;EACN,SAAS;EACT,UAAU;EACV,aAAa;EACb,cAAc;EACd,eAAe;EACf,oBAAoB;AACtB;;AAEA;EACE,kBAAkB;EAClB,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,YAAY;EACZ,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;EACf,sBAAsB;EACtB,sBAAsB;EACtB,iCAAiC;EACjC,yBAAyB;EACzB,mCAAmC;AACrC;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,cAAc;EACd,cAAc;EACd,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,QAAQ;EACR,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,yDAAugB;EACvgB,YAAY;EACZ,4BAA4B;EAC5B,2BAA2B;EAC3B,YAAY;EACZ,4BAA4B;EAC5B,yBAAyB;EACzB,mCAAmC;AACrC;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,kBAAkB;EAClB,SAAS;EACT,SAAS;EACT,6BAA6B;AAC/B;;AAEA;;;;EAIE,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,SAAS;AACX;;AAEA;EACE,QAAQ;EACR,MAAM;EACN,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,YAAY;EACZ,sBAAsB;EACtB,yDAA2U;EAC3U,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;EAC9B,WAAW;EACX,cAAc;EACd,kBAAkB;EAClB,UAAU;EACV,QAAQ;EACR,eAAe;EACf,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,kBAAkB;EAClB,iBAAiB;EACjB,sCAAsC;AACxC;;AAEA;;;EAGE,WAAW;EACX,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,eAAe;EACf,WAAW;EACX,YAAY;AACd",sourcesContent:['@charset "UTF-8";\n\n/* shared CSS with Radiant Media Player */\n.rmp-container {\n  position: relative;\n  text-align: center;\n  outline: none;\n  background: #000;\n  padding: 0;\n  border: none;\n  display: block;\n  font-size: 14px;\n  max-width: none;\n  max-height: none;\n  overflow: hidden;\n  line-height: 1;\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.rmp-container * {\n  box-sizing: border-box;\n}\n\n.rmp-video,\n.rmp-content {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  display: block;\n}\n\n.rmp-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n  display: block;\n  text-align: initial;\n}\n\n.rmp-fullscreen-on {\n  position: fixed !important;\n  width: 100% !important;\n  height: 100% !important;\n  background: #000 !important;\n  overflow: hidden !important;\n  z-index: 9999 !important;\n  top: 0;\n  left: 0;\n}\n\n/* specific CSS to rmp-vast */\n.rmp-vpaid-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n  display: block;\n  text-align: initial;\n}\n\n.rmp-ad-vast-video-player {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n  display: block;\n  cursor: pointer;\n  pointer-events: none;\n}\n\n.rmp-ad-container-icons {\n  position: absolute;\n  display: block;\n  cursor: pointer;\n}\n\n.rmp-ad-container-skip {\n  position: absolute;\n  right: 0;\n  bottom: 44px;\n  width: 160px;\n  height: 40px;\n  line-height: 38px;\n  text-align: center;\n  cursor: pointer;\n  background-color: #333;\n  border: 1px solid #333;\n  transition-property: border-color;\n  transition-duration: 0.4s;\n  transition-timing-function: ease-in;\n}\n\n.rmp-ad-container-skip:hover {\n  border-color: #000;\n}\n\n.rmp-ad-container-skip-waiting {\n  width: 100%;\n  position: absolute;\n  padding: 0 2px;\n  color: #cfcfcf;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.rmp-ad-container-skip-message {\n  width: 65%;\n  position: absolute;\n  left: 5%;\n  color: #FFF;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.rmp-ad-container-skip-icon {\n  position: absolute;\n  left: 75%;\n  width: 20%;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpi/P//PwMUNADxXyBuZsAPcoA4CIjfA/EuIJ4JFgUZBMU3/kNAMZIYNnz8PwIcgokzIdl0A0r3AHEbHhf9RGJ/hjGQDWJFYlcC8SQgZibgzf/YDEIHuUC8CIi58ahhJMYgEIgC4mVALIFNMzIgZBAI+AHxRiCWRfcOqQaBgBkQrwRiMSB+iE0BCwPxwBKIDwLxH0pcBAMPkKOcXIPmALEnED+lxKDJQJwKZUuQa1AVEOch8f+SE9hZQDydGCcjG/QPif0H6pUF+LIFriwCy1dvgTgChyEMaPmPBZuLVKA2RALxbjy+IGjQCiD+RcAQEFgF9fpHIN4GEwQIMACnXWgupdnzwwAAAABJRU5ErkJggg==");\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.7;\n  transition-property: opacity;\n  transition-duration: 0.4s;\n  transition-timing-function: ease-in;\n}\n\n.rmp-ad-container-skip:hover .rmp-ad-container-skip-icon {\n  opacity: 1;\n}\n\n.rmp-ad-non-linear-container {\n  position: absolute;\n  text-align: center;\n  left: 50%;\n  bottom: 0;\n  transform: translate(-50%, 0);\n}\n\n.rmp-ad-non-linear-anchor:link,\n.rmp-ad-non-linear-anchor:visited,\n.rmp-ad-non-linear-anchor:hover,\n.rmp-ad-non-linear-anchor:active {\n  text-decoration: none;\n}\n\n.rmp-ad-non-linear-creative {\n  position: relative;\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n}\n\n.rmp-ad-non-linear-close { \n  right: 0;\n  top: 0;\n  position: absolute;\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  background-color: #000;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHdJREFUeNqUk9EKwCAIRaX9/9MgEAZ9amsPsWVXdxV8Ec+B1Ep/o40UMuuEpK/RMvAUnEZysfAIlYRkg5/6tyGSQNgKPIkLIwGSuLAn8CSKeovgOMiaMKtKPQENjB5i1Pi7xkoMzD0kBg5PmYVnqv1MGXiT3AIMACNQPFnn5xfHAAAAAElFTkSuQmCC");\n  background-size: cover;\n  border: 4px solid #000;\n}\n\n.rmp-ad-click-ui-mobile {\n  border: 2px solid #fff;\n  background: rgba(0, 0, 0, 0.4);\n  color: #fff;\n  display: block;\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  font-size: 18px;\n  width: 112px;\n  height: 34px;\n  text-decoration: none;\n  text-align: center;\n  line-height: 30px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.4);\n}\n\n.rmp-ad-click-ui-mobile:visited,\n.rmp-ad-click-ui-mobile:hover,\n.rmp-ad-click-ui-mobile:active {\n  color: #fff;\n  text-decoration: none;\n}\n\n.rmp-linear-simid-creative {\n  position: absolute;\n  top: 0;\n  border-width: 0;\n  width: 100%;\n  height: 100%;\n}\n'],sourceRoot:""}]),t.A=c},72:function(e){var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var r={},a=[],o=0;o<e.length;o++){var l=e[o],d=s.base?l[0]+s.base:l[0],h=r[d]||0,c="".concat(d," ").concat(h);r[d]=h+1;var p=i(c),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=n(u,s);s.byIndex=o,t.splice(o,0,{identifier:c,updater:m,references:1})}a.push(c)}return a}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var r=s(e=e||[],n=n||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var o=i(r[a]);t[o].references--}for(var l=s(e,n),d=0;d<r.length;d++){var h=i(r[d]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}r=l}}},113:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(s)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var h=[].concat(e[d]);s&&a[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},354:function(e){e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),r="/*# ".concat(n," */");return[t].concat([r]).join("\n")}return[t].join("\n")}},417:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},540:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:function(e){var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},669:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpi/P//PwMUNADxXyBuZsAPcoA4CIjfA/EuIJ4JFgUZBMU3/kNAMZIYNnz8PwIcgokzIdl0A0r3AHEbHhf9RGJ/hjGQDWJFYlcC8SQgZibgzf/YDEIHuUC8CIi58ahhJMYgEIgC4mVALIFNMzIgZBAI+AHxRiCWRfcOqQaBgBkQrwRiMSB+iE0BCwPxwBKIDwLxH0pcBAMPkKOcXIPmALEnED+lxKDJQJwKZUuQa1AVEOch8f+SE9hZQDydGCcjG/QPif0H6pUF+LIFriwCy1dvgTgChyEMaPmPBZuLVKA2RALxbjy+IGjQCiD+RcAQEFgF9fpHIN4GEwQIMACnXWgupdnzwwAAAABJRU5ErkJggg=="},824:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHdJREFUeNqUk9EKwCAIRaX9/9MgEAZ9amsPsWVXdxV8Ec+B1Ep/o40UMuuEpK/RMvAUnEZysfAIlYRkg5/6tyGSQNgKPIkLIwGSuLAn8CSKeovgOMiaMKtKPQENjB5i1Pi7xkoMzD0kBg5PmYVnqv1MGXiT3AIMACNQPFnn5xfHAAAAAElFTkSuQmCC"},825:function(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,exports:{}};return n[e](i,i.exports,a),i.exports}a.m=n,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"==typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"==typeof i.then)return i}var n=Object.create(null);a.r(n);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){r[e]=function(){return i[e]}}));return r.default=function(){return i},a.d(n,r),n},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,i){return a.f[i](e,t),t}),[]))},a.u=function(e){return e+".js"},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},s="@pavloniym/rmp-vast:",a.l=function(e,t,n,r){if(i[e])i[e].push(t);else{var o,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),h=0;h<d.length;h++){var c=d[h];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==s+n){o=c;break}}o||(l=!0,(o=document.createElement("script")).type="module",o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",s+n),o.src=e),i[e]=[t];var p=function(t,s){o.onerror=o.onload=null,clearTimeout(u);var n=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(e){return e(s)})),t)return t(s)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",function(){a.b=document.baseURI||self.location.href;var e={212:0};a.f.j=function(t,i){var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise((function(i,n){s=e[t]=[i,n]}));i.push(s[2]=n);var r=a.p+a.u(t),o=new Error;a.l(r,(function(i){if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,s[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var s,n,r=i[0],o=i[1],l=i[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);l&&l(a)}for(t&&t(i);d<r.length;d++)n=r[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0},i=self.webpackChunk_pavloniym_rmp_vast=self.webpackChunk_pavloniym_rmp_vast||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),a.nc=void 0;class o{static createSyntheticEvent(e,t){let i;if(t)try{i=new Event(e),t.dispatchEvent(i)}catch(e){console.warn(e)}}static setStyle(e,t){e&&"object"==typeof t&&Object.keys(t).forEach((i=>{e.style[i]=t[i]}))}static getWidth(e){return e?o.isNumber(e.offsetWidth)&&0!==e.offsetWidth?e.offsetWidth:l.call(o,e,"width"):0}static getHeight(e){return e?o.isNumber(e.offsetHeight)&&0!==e.offsetHeight?e.offsetHeight:l.call(o,e,"height"):0}static show(e){e&&(e.style.display="block")}static hide(e){e&&(e.style.display="none")}static removeElement(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(e){console.warn(e)}}static isNumber(e){return!("number"!=typeof e||!Number.isFinite(e))}static openWindow(e){try{window.open(e,"_blank")}catch(e){console.warn(e)}}static ajax(e,t,i){return new Promise(((s,n)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.timeout=t,i&&(r.withCredentials=!0),r.onloadend=()=>{"number"==typeof r.status&&r.status>=200&&r.status<300?s("XMLHttpRequest request succeeded"):n("XMLHttpRequest wrong status code: "+r.status)},r.ontimeout=()=>{n("XMLHttpRequest timeout")},r.send(null)}))}static addEvents(e,t,i){e&&e.length>1&&t&&"function"==typeof i&&e.forEach((e=>{t.addEventListener(e,i)}))}static stopPreventEvent(e){e&&(e.stopPropagation(),e.preventDefault())}static vastReadableTime(e){if(o.isNumber(e)&&e>=0){let t=0,i=0,s=0,n=Math.floor(e%1e3);return n=0===n?"000":n<10?"00"+n:n<100?"0"+n:n.toString(),t=Math.floor(1*e/1e3),t>59&&(i=Math.floor(1*t/60),t-=60*i),t=0===t?"00":t<10?"0"+t:t.toString(),i>59&&(s=Math.floor(1*i/60),i-=60*s),i=0===i?"00":i<10?"0"+i:i.toString(),s=0===s?"00":s<10?"0"+s:s>23?"00":s.toString(),s+":"+i+":"+t+"."+n}return"00:00:00.000"}static generateCacheBusting(){let e="";for(let t=0;t<8;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}static makeButtonAccessible(e,t){e.tabIndex=0,e.setAttribute("role","button"),e.addEventListener("keyup",(t=>{const i=t.which;13!==i&&32!==i||(t.stopPropagation(),t.preventDefault(),o.createSyntheticEvent("click",e))})),t&&e.setAttribute("aria-label",t)}}function l(e,t){let i=0;if(e&&"function"==typeof window.getComputedStyle){const s=window.getComputedStyle(e,null);s&&(i=s.getPropertyValue(t),i=i.toString().toLowerCase())}return i=i.toString(),i.indexOf("px")>-1&&(i=i.replace("px","")),parseFloat(i)}class d{static get userAgent(){return navigator.userAgent?navigator.userAgent:null}static get devicePixelRatio(){let e=1;return o.isNumber(window.devicePixelRatio)&&window.devicePixelRatio>1&&(e=window.devicePixelRatio),e}static get maxTouchPoints(){return"number"==typeof navigator.maxTouchPoints?navigator.maxTouchPoints:-1}static get isIos(){let e=[!1,-1];return/(ipad|iphone|ipod)/i.test(d.userAgent)&&p()&&(e=[!0,h.call(d,/os\s+(\d+)_/i)]),e}static get isIpadOS(){return!!(!d.isIos[0]&&p()&&/macintel/i.test(navigator.platform)&&d.devicePixelRatio>1&&d.maxTouchPoints>1)}static get isMacOS(){let e=!1,t=-1;return d.isIos[0]||d.isIpadOS||!/(macintosh|mac\s+os)/i.test(d.userAgent)||(e=!0,t=h.call(d,/mac\s+os\s+x\s+(\d+)_(\d+)/i,!0)),[e,t]}static get isSafari(){let e=!1,t=-1;return/safari\/[.0-9]*/i.test(d.userAgent)&&!/(chrome|chromium|android|crios|fxios)/i.test(d.userAgent)&&(e=!0,t=h.call(d,/version\/(\d+)\./i)),[e,t]}static get isMacOSSafari(){return d.isMacOS[0]&&d.isSafari[0]}static get isAndroid(){let e=[!1,-1];return!d.isIos[0]&&p()&&/android/i.test(d.userAgent)&&(e=[!0,h.call(d,/android\s*(\d+)\./i)]),e}static get isMobile(){return!!(d.isIos[0]||d.isAndroid[0]||d.isIpadOS)}static get hasNativeFullscreenSupport(){const e=document.documentElement,t=c();return!(!e||void 0===e.requestFullscreen&&void 0===e.webkitRequestFullscreen&&void 0===e.mozRequestFullScreen&&void 0===e.msRequestFullscreen&&void 0===t.webkitEnterFullscreen)}static checkCanPlayType(e,t){const i=c();if("undefined"!==i.canPlayType)if(e&&t){if(""!==i.canPlayType(e+'; codecs="'+t+'"'))return!0}else if(e&&!t&&""!==i.canPlayType(e))return!0;return!1}}function h(e){if(navigator.userAgent){const t=navigator.userAgent.match(e);if(Array.isArray(t)&&void 0!==t[1])return parseInt(t[1],10)}return-1}function c(e){return document.createElement("video")}function p(e){return!!(void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof window.DocumentTouch)}class u{static printVideoEvents(e,t,i){["loadstart","durationchange","playing","waiting","loadedmetadata","loadeddata","canplay","canplaythrough"].forEach((s=>{t.addEventListener(s,(t=>{t&&t.type&&u.print(e,`${i} video player event "${t.type}"`)}))}))}static print(e,t,i){e?(t&&console.log(`RMP-VAST: ${t}`),void 0!==i&&m.call(u,i)):(t&&console.log(`%crmp-vast%c${t}`,"color: white; background-color: #00ACC1; padding:1px 3px; border-radius: 3px; margin-right: 7px;",""),i&&console.log(i))}}function m(e){if(null===e)console.log("null");else if("object"==typeof e)try{console.log(JSON.stringify(e))}catch(e){console.warn(e)}else void 0!==e.toString&&console.log(e.toString())}function g(e,t,i){A(e,t),t.set(e,i)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){return e.get(E(e,t))}function f(e,t,i){return e.set(E(e,t),i),i}function E(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var y=new WeakMap,w=new WeakMap,C=new WeakSet;class T{constructor(e){!function(e,t){A(e,t),t.add(e)}(this,C),g(this,y,void 0),g(this,w,null),f(y,this,e)}filterParams(e){const t={ajaxTimeout:8e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,labels:{skipMessage:"Skip ad",closeAd:"Close ad",textForInteractionUIOnMobile:"Learn more"},outstream:!1,showControlsForAdPlayer:!1,vastXmlInput:!1,enableVpaid:!0,enableSimid:!0,vpaidSettings:{width:640,height:360,viewMode:"normal",desiredBitrate:500},useHlsJS:!0,debugHlsJS:!1,debugRawConsoleLogs:!1,omidSupport:!1,omidAllowedVendors:[],omidRunValidationScript:!1,omidAutoplay:!1,macros:new Map,partnerName:"rmp-vast",partnerVersion:"17.0.1-esm-v2"};v(y,this).params=t,e&&"object"==typeof e&&Object.keys(e).forEach((t=>{typeof e[t]==typeof v(y,this).params[t]&&(o.isNumber(e[t])&&e[t]>0||"number"!=typeof e[t])&&("vpaidSettings"===t?(o.isNumber(e.vpaidSettings.width)&&e.vpaidSettings.width>0&&(v(y,this).params.vpaidSettings.width=e.vpaidSettings.width),o.isNumber(e.vpaidSettings.height)&&e.vpaidSettings.height>0&&(v(y,this).params.vpaidSettings.height=e.vpaidSettings.height),"string"==typeof e.vpaidSettings.viewMode&&"fullscreen"===e.vpaidSettings.viewMode&&(v(y,this).params.vpaidSettings.viewMode=e.vpaidSettings.viewMode),o.isNumber(e.vpaidSettings.desiredBitrate)&&e.vpaidSettings.desiredBitrate>0&&(v(y,this).params.vpaidSettings.desiredBitrate=e.vpaidSettings.desiredBitrate)):v(y,this).params[t]=e[t])}))}createApiEvent(e){Array.isArray(e)?e.forEach((t=>{t&&(u.print(v(y,this).debugRawConsoleLogs,`API EVENT - ${e}`),v(y,this).dispatch(t))})):e&&(u.print(v(y,this).debugRawConsoleLogs,`API EVENT - ${e}`),v(y,this).dispatch(e))}playPromise(e,t){let i;switch(e){case"content":i=v(y,this).currentContentPlayer;break;case"vast":i=v(y,this).currentAdPlayer}if(i){const s=i.play();if(void 0!==s){const i=v(y,this).creative.isLinear;s.then((()=>{u.print(v(y,this).debugRawConsoleLogs,`playPromise on ${e} player has succeeded`),t&&this.createApiEvent("adinitialplayrequestsucceeded")})).catch((s=>{console.warn(s),t&&"vast"===e&&i?(u.print(v(y,this).debugRawConsoleLogs,"initial play promise on ad player has been rejected"),this.processVastErrors(400,!0),this.createApiEvent("adinitialplayrequestfailed")):t&&"content"===e&&!i?(u.print(v(y,this).debugRawConsoleLogs,"initial play promise on content player has been rejected"),this.createApiEvent("adinitialplayrequestfailed")):u.print(v(y,this).debugRawConsoleLogs,`playPromise on ${e} player has been rejected`)}))}}}destroyFullscreen(){v(y,this).currentContentPlayer?(v(y,this).currentContentPlayer.removeEventListener("webkitbeginfullscreen",v(w,this)),v(y,this).currentContentPlayer.removeEventListener("webkitendfullscreen",v(w,this))):document.removeEventListener("fullscreenchange",v(w,this))}handleFullscreen(){d.hasNativeFullscreenSupport&&(f(w,this,E(C,this,b).bind(this)),d.isIos[0]?v(y,this).currentContentPlayer&&(v(y,this).currentContentPlayer.addEventListener("webkitbeginfullscreen",v(w,this)),v(y,this).currentContentPlayer.addEventListener("webkitendfullscreen",v(w,this))):document.addEventListener("fullscreenchange",v(w,this)))}processVastErrors(e,t){t&&v(y,this).rmpVastTracking.error(e),E(C,this,k).call(this,e),this.createApiEvent("aderror"),v(y,this).rmpVastAdPlayer&&v(y,this).rmpVastAdPlayer.resumeContent()}}function b(e){if(e&&e.type){u.print(v(y,this).debugRawConsoleLogs,`event is ${e.type}`);const t=v(y,this).creative.isLinear,i=v(y,this).__adOnStage;"fullscreenchange"===e.type?v(y,this).isInFullscreen?(v(y,this).isInFullscreen=!1,i&&t&&v(y,this).rmpVastTracking.dispatchTrackingAndApiEvent(["adexitfullscreen","adplayercollapse"])):(v(y,this).isInFullscreen=!0,i&&t&&v(y,this).rmpVastTracking.dispatchTrackingAndApiEvent(["adfullscreen","adplayerexpand"])):"webkitbeginfullscreen"===e.type?(i&&t&&v(y,this).rmpVastTracking.dispatchTrackingAndApiEvent(["adfullscreen","adplayerexpand"]),v(y,this).isInFullscreen=!0):"webkitendfullscreen"===e.type&&(i&&t&&v(y,this).rmpVastTracking.dispatchTrackingAndApiEvent(["adexitfullscreen","adplayercollapse"]),v(y,this).isInFullscreen=!1)}}function k(e){const t=[{code:201,description:"Video player expecting different linearity."},{code:204,description:"Ad category was required but not provided."},{code:205,description:"Inline Category violates Wrapper BlockedAdCategories."},{code:303,description:"No VAST response after one or more Wrappers."},{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},{code:402,description:"Timeout of MediaFile URI."},{code:403,description:"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},{code:503,description:"Couldn't find NonLinear resource with supported type."},{code:603,description:"Unable to fetch CompanionAds/Companion resource."},{code:900,description:"Undefined Error."},{code:901,description:"General VPAID error."},{code:1001,description:"Invalid input for loadAds method"},{code:1002,description:"Required DOMParser API is not available"},{code:1100,description:"SIMID error: UNSPECIFIED_CREATIVE_ERROR"},{code:1101,description:"SIMID error: CANNOT_LOAD_RESOURCE"},{code:1102,description:"SIMID error: PLAYBACK_AREA_UNUSABLE"},{code:1103,description:"SIMID error: INCORRECT_VERSION"},{code:1104,description:"SIMID error: TECHNICAL_ERROR"},{code:1105,description:"SIMID error: EXPAND_NOT_POSSIBLE"},{code:1106,description:"SIMID error: PAUSE_NOT_HONORED"},{code:1107,description:"SIMID error: PLAYMODE_NOT_ADEQUATE"},{code:1108,description:"SIMID error: CREATIVE_INTERNAL_ERROR"},{code:1109,description:"SIMID error: DEVICE_NOT_SUPPORTED"},{code:1110,description:"SIMID error: MESSAGES_NOT_FOLLOWING_SPEC"},{code:1111,description:"SIMID error: PLAYER_RESPONSE_TIMEOUT"},{code:1200,description:"SIMID error: UNSPECIFIED_PLAYER_ERROR"},{code:1201,description:"SIMID error: WRONG_VERSION"},{code:1202,description:"SIMID error: UNSUPPORTED_TIME"},{code:1203,description:"SIMID error: UNSUPPORTED_FUNCTIONALITY_REQUEST"},{code:1204,description:"SIMID error: UNSUPPORTED_ACTIONS"},{code:1205,description:"SIMID error: POSTMESSAGE_CHANNEL_OVERLOADED"},{code:1206,description:"SIMID error: VIDEO_COULD_NOT_LOAD"},{code:1207,description:"SIMID error: VIDEO_TIME_OUT"},{code:1208,description:"SIMID error: RESPONSE_TIMEOUT"},{code:1209,description:"SIMID error: MEDIA_NOT_SUPPORTED"},{code:1210,description:"SIMID error: SPEC_NOT_FOLLOWED_ON_INIT"},{code:1211,description:"SIMID error: SPEC_NOT_FOLLOWED_ON_MESSAGES"}].filter((t=>t.code===e));t.length>0?(v(y,this).__vastErrorCode=t[0].code,v(y,this).__adErrorMessage=t[0].description):(v(y,this).__vastErrorCode=-1,v(y,this).__adErrorMessage="Error getting VAST error"),v(y,this).__vastErrorCode>-1&&([303,900,1001].indexOf(v(y,this).__vastErrorCode)>-1?v(y,this).__adErrorType="adLoadError":[201,204,205,400,401,402,403,501,502,503,603,901,1002].indexOf(v(y,this).__vastErrorCode)>-1&&(v(y,this).__adErrorType="adPlayError")),u.print(v(y,this).debugRawConsoleLogs,`VAST error code is ${v(y,this).__vastErrorCode} with message: ${v(y,this).__adErrorMessage}`),u.print(v(y,this).debugRawConsoleLogs,`Ad error type is ${v(y,this).__adErrorType}`)}function R(e,t,i){I(e,t),t.set(e,i)}function I(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function V(e,t){return e.get(P(e,t))}function S(e,t,i){return e.set(P(e,t),i),i}function P(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var L=new WeakMap,_=new WeakMap,U=new WeakMap,N=new WeakMap,M=new WeakMap,x=new WeakMap,B=new WeakMap,D=new WeakMap,O=new WeakMap,W=new WeakMap,F=new WeakMap,q=new WeakSet;class j{constructor(e){!function(e,t){I(e,t),t.add(e)}(this,q),R(this,L,void 0),R(this,_,new Map),R(this,U,null),R(this,N,null),R(this,M,null),R(this,x,null),R(this,B,null),R(this,D,null),R(this,O,!1),R(this,W,!1),R(this,F,!1),S(L,this,e),P(q,this,z).call(this)}replaceMacros(e,t){if(!/\[.+?\]/i.test(e))return e;let i=e;if(V(L,this).params.macros.size>0)for(let[e,t]of V(L,this).params.macros){const s=new RegExp("\\["+e+"\\]","gi");s.test(i)&&(i=i.replace(s,t.toString()))}const s=/\[CLICKPOS\]/gi;s.test(i)&&(i=i.replace(s,"-2"));const n=/\[ADCOUNT\]/gi;if(n.test(i)){let e=1;V(L,this).adPodLength>0&&(e=V(L,this).adSequence),i=i.replace(n,e.toString())}/\[SERVERSIDE\]/gi.test(i)&&(i=i.replace(n,"0"));const r=/\[TIMESTAMP\]/gi,a=(new Date).toISOString();r.test(i)&&(i=i.replace(r,encodeURIComponent(a)));const l=/\[CACHEBUSTING\]/gi;l.test(i)&&(i=i.replace(l,o.generateCacheBusting()));const h=/\[(CONTENTPLAYHEAD|MEDIAPLAYHEAD)\]/gi;let c=V(L,this).rmpVastContentPlayer.currentTime;h.test(i)&&c>-1&&(i=i.replace(h,encodeURIComponent(o.vastReadableTime(c))));const p=/\[BREAKPOSITION\]/gi;let u=-1;V(L,this).rmpVastAdPlayer&&(u=V(L,this).rmpVastAdPlayer.duration),p.test(i)&&(i=0===c?i.replace(p,"1"):c>0&&c<u?i.replace(p,"2"):i.replace(p,"3"));const m=/\[ADTYPE\]/gi;m.test(i)&&V(L,this).ad.adType&&(i=i.replace(m,encodeURIComponent(V(L,this).ad.adType)));const g=/\[DEVICEUA\]/gi;g.test(i)&&d.userAgent&&(i=i.replace(g,encodeURIComponent(d.userAgent)));const A=/\[SERVERSIDE\]/gi;A.test(i)&&d.userAgent&&(i=i.replace(A,"0"));const v=/\[DOMAIN\]/gi;v.test(i)&&window.location.hostname&&(i=i.replace(v,encodeURIComponent(window.location.hostname)));const f=/\[PAGEURL\]/gi;f.test(i)&&window.location.href&&(i=i.replace(f,encodeURIComponent(window.location.href)));const E=/\[PLAYERCAPABILITIES\]/gi;E.test(i)&&(i=i.replace(E,"skip,mute,autoplay,mautoplay,fullscreen,icon"));const y=/\[CLICKTYPE\]/gi;if(y.test(i)){let e="1";d.isMobile&&(e="2"),i=i.replace(y,e)}const w=/\[PLAYERSIZE\]/gi;if(w.test(i)){const e=parseInt(o.getWidth(V(L,this).container)),t=parseInt(o.getHeight(V(L,this).container));i=i.replace(w,encodeURIComponent(e.toString()+","+t.toString()))}if(t){const e=/\[ADPLAYHEAD\]/gi;let t=-1;V(L,this).rmpVastAdPlayer&&(t=V(L,this).rmpVastAdPlayer.currentTime),e.test(i)&&t>-1&&(i=i.replace(e,encodeURIComponent(o.vastReadableTime(t))));const s=/\[UNIVERSALADID\]/gi;if(s.test(i)&&V(L,this).creative.universalAdIds.length>0){let e="";V(L,this).creative.universalAdIds.forEach(((t,i)=>{0===i&&i===V(L,this).creative.universalAdIds.length-1||(e+=","),e+=t.idRegistry+" "+t.value})),i=i.replace(s,encodeURIComponent(e))}const n=/\[ASSETURI\]/gi,r=V(L,this).adMediaUrl;n.test(i)&&"string"==typeof r&&""!==r&&(i=i.replace(n,encodeURIComponent(r)));const a=/\[PODSEQUENCE\]/gi;a.test(i)&&V(L,this).ad.sequence&&(i=i.replace(a,encodeURIComponent(V(L,this).ad.sequence.toString())));const l=/\[ADSERVINGID\]/gi;l.test(i)&&V(L,this).ad.adServingId&&(i=i.replace(l,encodeURIComponent(V(L,this).ad.adServingId)))}else{const e=/\[ADCATEGORIES\]/gi;if(e.test(i)&&V(L,this).ad.categories.length>0){const t=V(L,this).ad.categories.map((e=>e.value)).join(",");i=i.replace(e,encodeURIComponent(t))}const t=/\[BLOCKEDADCATEGORIES\]/gi;if(t.test(i)&&V(L,this).ad.blockedAdCategories.length>0){const e=V(L,this).ad.blockedAdCategories.map((e=>e.value)).join(",");i=i.replace(t,encodeURIComponent(e))}const s=/\[VASTVERSIONS\]/gi;s.test(i)&&(i=i.replace(s,"2,3,5,6,7,8,11,12,13,14"));const n=/\[APIFRAMEWORKS\]/gi;n.test(i)&&(i=i.replace(n,"2,7,8,9"));const r=/\[MEDIAMIME\]/gi,a=["video/webm","video/mp4","video/ogg","video/3gpp","application/vnd.apple.mpegurl","application/dash+xml"];if(r.test(i)){let e="";a.forEach((t=>{"application/vnd.apple.mpegurl"===t?(d.checkCanPlayType(t)||V(L,this).rmpVastLinearCreative.readingHlsJS)&&(e+=t+","):d.checkCanPlayType(t)&&(e+=t+",")})),e&&(e=e.slice(0,-1),i=i.replace(r,encodeURIComponent(e)))}const o=/\[PLAYERSTATE\]/gi;if(o.test(i)){let e="";V(L,this).rmpVastContentPlayer.muted&&(e+="muted"),V(L,this).isInFullscreen&&(e&&(e+=","),e+="fullscreen"),i=i.replace(o,e)}}const C=/\[LIMITADTRACKING\]/gi,T=V(L,this).regulationsInfo;C.test(i)&&T.limitAdTracking&&(i=i.replace(C,encodeURIComponent(T.limitAdTracking)));const b=/\[REGULATIONS\]/gi;b.test(i)&&T.regulations&&(i=i.replace(b,encodeURIComponent(T.regulations)));const k=/\[GDPRCONSENT\]/gi;return k.test(i)&&T.gdprConsent&&(i=i.replace(k,encodeURIComponent(T.gdprConsent))),i}pingURI(e){const t=this.replaceMacros(e,!0);P(q,this,Y).call(this,t)}error(e){let t=V(L,this).adErrorTags;303===e&&V(L,this).vastErrorTags.length>0&&(t=[...t,...V(L,this).vastErrorTags]),t.length>0&&t.forEach((t=>{if(t.url){let i=t.url;const s=/\[ERRORCODE\]/gi;s.test(i)&&o.isNumber(e)&&e>0&&e<1e3&&(i=i.replace(s,e)),P(q,this,Y).call(this,i)}}))}reset(){S(U,this,null),S(N,this,null),S(M,this,null),S(x,this,null),S(B,this,null),S(D,this,null),S(O,this,!1),S(W,this,!1),S(F,this,!1)}dispatchTrackingAndApiEvent(e){Array.isArray(e)?e.forEach((e=>{V(L,this).rmpVastUtils.createApiEvent(e),P(q,this,$).call(this,V(_,this).get(e))})):(V(L,this).rmpVastUtils.createApiEvent(e),P(q,this,$).call(this,V(_,this).get(e)))}destroy(){V(L,this).currentAdPlayer&&(V(L,this).currentAdPlayer.removeEventListener("pause",V(U,this)),V(L,this).currentAdPlayer.removeEventListener("play",V(N,this)),V(L,this).currentAdPlayer.removeEventListener("playing",V(M,this)),V(L,this).currentAdPlayer.removeEventListener("ended",V(x,this)),V(L,this).currentAdPlayer.removeEventListener("volumechange",V(B,this)),V(L,this).currentAdPlayer.removeEventListener("timeupdate",V(D,this)))}wire(){V(L,this).currentAdPlayer&&V(L,this).creative.isLinear&&!V(L,this).rmpVastVpaidPlayer&&(S(U,this,P(q,this,J).bind(this)),V(L,this).currentAdPlayer.addEventListener("pause",V(U,this)),S(N,this,P(q,this,Z).bind(this)),V(L,this).currentAdPlayer.addEventListener("play",V(N,this)),S(M,this,P(q,this,K).bind(this)),V(L,this).currentAdPlayer.addEventListener("playing",V(M,this),{once:!0}),S(x,this,P(q,this,X).bind(this)),V(L,this).currentAdPlayer.addEventListener("ended",V(x,this),{once:!0}),S(B,this,P(q,this,Q).bind(this)),V(L,this).currentAdPlayer.addEventListener("volumechange",V(B,this)),S(D,this,P(q,this,G).bind(this)),V(L,this).currentAdPlayer.addEventListener("timeupdate",V(D,this)))}}function z(){V(_,this).set("adviewable","viewable"),V(_,this).set("adviewundetermined","viewundetermined"),V(_,this).set("advolumemuted","mute"),V(_,this).set("advolumeunmuted","unmute"),V(_,this).set("adpaused","pause"),V(_,this).set("adresumed","resume"),V(_,this).set("adskipped","skip"),V(_,this).set("adplayerexpand","playerExpand"),V(_,this).set("adplayercollapse","playerCollapse"),V(_,this).set("adfullscreen","fullscreen"),V(_,this).set("adexitfullscreen","exitFullscreen"),V(_,this).set("adloaded","loaded"),V(_,this).set("adstarted","start"),V(_,this).set("adfirstquartile","firstQuartile"),V(_,this).set("admidpoint","midpoint"),V(_,this).set("adthirdquartile","thirdQuartile"),V(_,this).set("adcomplete","complete"),V(_,this).set("adimpression","impression"),V(_,this).set("adcreativeview","creativeView"),V(_,this).set("adcollapse","adCollapse"),V(_,this).set("aduseracceptinvitation","acceptInvitation"),V(_,this).set("adclosed","close"),V(_,this).set("adclick","clickthrough")}function H(e){u.print(V(L,this).debugRawConsoleLogs,`ping tracking for ${e} VAST event`);const t=V(L,this).trackingTags.filter((t=>e===t.event));t.length>0&&t.forEach((e=>{this.pingURI(e.url)}))}function Y(e){if(/\.js$/i.test(e)){const t=document.createElement("script");t.src=e;try{document.head.appendChild(t)}catch(e){console.warn(e),document.body.appendChild(t)}}else o.ajax(e,V(L,this).params.ajaxTimeout,!1,"GET").then((()=>{u.print(V(L,this).debugRawConsoleLogs,`VAST tracker successfully loaded ${e}`)})).catch((e=>{console.warn(e)}))}function Q(){if(V(L,this).currentAdPlayer){const e=V(L,this).currentAdPlayer.muted,t=V(L,this).currentAdPlayer.volume;e||0===t?this.dispatchTrackingAndApiEvent("advolumemuted"):!e&&t>0&&this.dispatchTrackingAndApiEvent("advolumeunmuted"),V(L,this).rmpVastUtils.createApiEvent("advolumechanged")}}function G(){let e=-1,t=-1;V(L,this).rmpVastAdPlayer&&(t=V(L,this).rmpVastAdPlayer.currentTime,e=V(L,this).rmpVastAdPlayer.duration),t>0&&(e>0&&e>t&&(t>=.25*e&&!V(O,this)?(S(O,this,!0),this.dispatchTrackingAndApiEvent("adfirstquartile")):t>=.5*e&&!V(W,this)?(S(W,this,!0),this.dispatchTrackingAndApiEvent("admidpoint")):t>=.75*e&&!V(F,this)&&(S(F,this,!0),this.dispatchTrackingAndApiEvent("adthirdquartile"))),V(L,this).progressEvents.length>0&&t>V(L,this).progressEvents[0].time)&&(V(L,this).progressEvents.filter((e=>e.time===V(L,this).progressEvents[0].time)).forEach((e=>{e.url&&this.pingURI(e.url)})),V(L,this).progressEvents.shift(),V(L,this).rmpVastUtils.createApiEvent("adprogress"))}function J(){if(V(L,this).currentAdPlayer&&V(L,this).currentAdPlayer.paused){if(V(L,this).currentAdPlayer.currentTime===V(L,this).currentAdPlayer.duration)return;this.dispatchTrackingAndApiEvent("adpaused")}}function Z(){V(L,this).currentAdPlayer&&!V(L,this).currentAdPlayer.paused&&this.dispatchTrackingAndApiEvent("adresumed")}function K(){this.dispatchTrackingAndApiEvent(["adimpression","adcreativeview","adstarted"])}function X(){this.dispatchTrackingAndApiEvent("adcomplete"),V(L,this).rmpVastAdPlayer&&V(L,this).rmpVastAdPlayer.resumeContent()}function $(e){Array.isArray(e)?e.forEach((e=>{P(q,this,H).call(this,e)})):P(q,this,H).call(this,e)}function ee(e,t,i){te(e,t),t.set(e,i)}function te(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ie(e,t){return e.get(ne(e,t))}function se(e,t,i){return e.set(ne(e,t),i),i}function ne(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var re=new WeakMap,ae=new WeakMap,oe=new WeakMap,le=new WeakMap,de=new WeakMap,he=new WeakSet;class ce{constructor(e){!function(e,t){te(e,t),t.add(e)}(this,he),ee(this,re,void 0),ee(this,ae,void 0),ee(this,oe,void 0),ee(this,le,null),ee(this,de,[]),se(re,this,e),se(ae,this,e.adContainer),se(oe,this,e.currentAdPlayer)}get iconsData(){return ie(de,this)}destroy(){u.print(ie(re,this).debugRawConsoleLogs,"Start destroying icons");const e=ie(ae,this).querySelectorAll(".rmp-ad-container-icons");e.length>0&&e.forEach((e=>{o.removeElement(e)})),ie(oe,this)&&ie(oe,this).removeEventListener("playing",ie(le,this))}parse(e){u.print(ie(re,this).debugRawConsoleLogs,"Start parsing icons");for(let t=0;t<e.length;t++){const i=e[t],s=i.program;if(null===s)continue;const n=i.width,r=i.height,a=i.xPosition,o=i.yPosition;if(n<=0||r<=0||a<0||o<0)continue;const l=i.staticResource,d=i.iframeResource,h=i.htmlResource;if(null===l&&null===d&&null===h)continue;const c={program:s,width:n,height:r,xPosition:a,yPosition:o,staticResourceUrl:l,iframeResourceUrl:d,htmlContent:h,altText:i.altText,hoverText:i.hoverText};c.iconViewTrackingUrl=i.iconViewTrackingURLTemplate,c.iconClickThroughUrl=i.iconClickThroughURLTemplate,c.iconClickTrackingUrls=i.iconClickTrackingURLTemplates,ie(de,this).push(c)}u.print(ie(re,this).debugRawConsoleLogs,"Validated parsed icons follows",ie(de,this))}append(){se(le,this,ne(he,this,me).bind(this)),ie(oe,this).addEventListener("playing",ie(le,this),{once:!0})}}function pe(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),o.openWindow(ie(de,this)[e].iconClickThroughUrl);const i=ie(de,this)[e].iconClickTrackingUrls;i.length>0&&i.forEach((e=>{e.url&&ie(re,this).rmpVastTracking.pingURI(e.url)})),ie(re,this).rmpVastUtils.createApiEvent("adiconclick")}function ue(e){u.print(ie(re,this).debugRawConsoleLogs,`IconViewTracking for icon at index ${e}`),ie(re,this).rmpVastTracking.pingURI(ie(de,this)[e].iconViewTrackingUrl)}function me(){u.print(ie(re,this).debugRawConsoleLogs,"playing states has been reached - append icons"),ie(de,this).forEach(((e,t)=>{let i,s;e.staticResourceUrl?(i=document.createElement("img"),e.altText&&(i.alt=e.altText),e.hoverText&&(i.title=e.hoverText),s=e.staticResourceUrl):(e.iframeResourceUrl||e.htmlContent)&&(i=document.createElement("iframe"),e.hoverText&&(i.title=e.hoverText),i.sandbox="allow-scripts allow-same-origin",s=e.htmlContent?e.htmlContent:e.iframeResourceUrl,o.setStyle(i,{border:"none",overflow:"hidden"}),i.setAttribute("scrolling","no"),i.setAttribute("allow","autoplay; fullscreen; picture-in-picture; encrypted-media"),i.setAttribute("sandbox","allow-scripts allow-presentation allow-same-origin")),i.className="rmp-ad-container-icons",o.setStyle(i,{width:parseInt(e.width)+"px",height:parseInt(e.height)+"px"});const n=e.xPosition;"left"===n?i.style.left="0px":"right"===n?i.style.right="0px":parseInt(n)>=0?i.style.left=n+"px":i.style.left="0px";const r=e.yPosition;if("top"===r?i.style.top="0px":"bottom"===n?i.style.bottom="0px":parseInt(r)>=0?i.style.top=r+"px":i.style.top="0px",e.iconViewTrackingUrl&&(i.onload=ne(he,this,ue).bind(this,t)),e.iconClickThroughUrl){const e=ne(he,this,pe).bind(this,t);o.addEvents(["touchend","click"],i,e)}e.htmlContent?i.srcdoc=s:i.src=s,u.print(ie(re,this).debugRawConsoleLogs,"Selected icon details follow",i),ie(ae,this).appendChild(i)}))}class ge{constructor(){}_getConnectionType(){if("string"==typeof navigator.connection.type&&""!==navigator.connection.type)switch(navigator.connection.type){case"ethernet":return"ethernet";case"wifi":case"wimax":case"mixed":case"other":return"wifi";case"bluetooth":case"cellular":return"cellular";case"none":return"none"}return"unknown"}_getBandwidthEstimate(){if("number"==typeof navigator.connection.downlink&&navigator.connection.downlink>0)return navigator.connection.downlink;if("string"==typeof navigator.connection.effectiveType&&""!==navigator.connection.effectiveType)switch(navigator.connection.effectiveType){case"slow-2g":return.025;case"2g":return.035;case"3g":return.35;case"4g":return 1.4;case"5g":return 5}else if("string"==typeof navigator.connection.type&&""!==navigator.connection.type)switch(navigator.connection.type){case"ethernet":case"wifi":case"wimax":case"mixed":case"other":return 1.4;case"bluetooth":case"cellular":return.35;case"none":return-1}return.35}get bandwidthData(){return void 0===navigator.onLine||navigator.onLine?void 0===navigator.connection?{estimate:-1,connectionType:"unknown"}:{estimate:this._getBandwidthEstimate(),connectionType:this._getConnectionType()}:{estimate:-1,connectionType:"none"}}}const Ae={CREATE_SESSION:"createSession",RESOLVE:"resolve",REJECT:"reject"},ve="Player:init",fe="Player:startCreative",Ee="Player:adSkipped",ye="Player:adStopped",we={CLICK_THRU:"Creative:clickThru",EXPAND_NONLINEAR:"Creative:expandNonlinear",COLLAPSE_NONLINEAR:"Creative:collapseNonlinear",FATAL_ERROR:"Creative:fatalError",GET_MEDIA_STATE:"Creative:getMediaState",LOG:"Creative:log",REQUEST_FULL_SCREEN:"Creative:requestFullScreen",REQUEST_SKIP:"Creative:requestSkip",REQUEST_STOP:"Creative:requestStop",REQUEST_PAUSE:"Creative:requestPause",REQUEST_PLAY:"Creative:requestPlay",REQUEST_RESIZE:"Creative:requestResize",REQUEST_VOLUME:"Creative:requestVolume",REQUEST_TRACKING:"Creative:reportTracking",REQUEST_CHANGE_AD_DURATION:"Creative:requestChangeAdDuration"},Ce=[we.GET_MEDIA_STATE,we.REQUEST_VIDEO_LOCATION,we.READY,we.CLICK_THRU,we.REQUEST_SKIP,we.REQUEST_STOP,we.REQUEST_PAUSE,we.REQUEST_PLAY,we.REQUEST_FULL_SCREEN,we.REQUEST_VOLUME,we.REQUEST_RESIZE,we.REQUEST_CHANGE_AD_DURATION,we.REPORT_TRACKING,ve,fe,Ee,ye,"Player:fatalError",Ae.CREATE_SESSION],Te=1105,be={UNSPECIFIED:0,USER_INITIATED:1,MEDIA_PLAYBACK_COMPLETE:2,PLAYER_INITATED:3,CREATIVE_INITIATED:4,NON_LINEAR_DURATION_COMPLETE:5};class ke{constructor(){this.listeners_={},this.sessionId_="",this.nextMessageId_=1,this.target_=window.parent,this.resolutionListeners_={},window.addEventListener("message",this.receiveMessage.bind(this),!1)}reset(){this.listeners_={},this.sessionId_="",this.nextMessageId_=1,this.resolutionListeners_={}}sendMessage(e,t){const i=this.nextMessageId_++,s=e===Ae.CREATE_SESSION?e:"SIMID:"+e,n={sessionId:this.sessionId_,messageId:i,type:s,timestamp:Date.now(),args:t};return Ce.includes(e)?new Promise(((e,t)=>{this.addResolveRejectListener_(i,e,t),this.target_.postMessage(JSON.stringify(n),"*")})):new Promise((e=>{this.target_.postMessage(JSON.stringify(n),"*"),e()}))}addListener(e,t){this.listeners_[e]?this.listeners_[e].push(t):this.listeners_[e]=[t]}addResolveRejectListener_(e,t,i){this.resolutionListeners_[e]=(e=>{const s=e.type,n=e.args.value;"resolve"===s?t(n):"reject"===s&&i(n)}).bind(this)}receiveMessage(e){if(!e||!e.data)return;let t;try{t=JSON.parse(e.data)}catch(e){return void console.warn(e)}if(!t)return;const i=t.sessionId,s=t.type,n=""===this.sessionId_&&s===Ae.CREATE_SESSION,r=this.sessionId_===i;if((n||r)&&null!==s)if(Object.values(Ae).includes(s))this.handleProtocolMessage_(t);else if(s.startsWith("SIMID:")){const e=s.substr(6),i=this.listeners_[e];i&&i.forEach((e=>e(t)))}}handleProtocolMessage_(e){const t=e.type;let i,s,n,r;switch(t){case Ae.CREATE_SESSION:this.sessionId_=e.sessionId,this.resolve(e),i=this.listeners_[t],i&&i.forEach((t=>t(e)));break;case Ae.RESOLVE:case Ae.REJECT:s=e.args,n=s.messageId,r=this.resolutionListeners_[n],r&&(r(e),delete this.resolutionListeners_[n])}}resolve(e,t){const i=this.nextMessageId_++,s={messageId:e.messageId,value:t},n={sessionId:this.sessionId_,messageId:i,type:Ae.RESOLVE,timestamp:Date.now(),args:s};this.target_.postMessage(JSON.stringify(n),"*")}reject(e,t){const i=this.nextMessageId_++,s={messageId:e.messageId,value:t},n={sessionId:this.sessionId_,messageId:i,type:Ae.REJECT,timestamp:Date.now(),args:s};this.target_.postMessage(JSON.stringify(n),"*")}createSession(){this.generateSessionId_(),this.sendMessage(Ae.CREATE_SESSION).then((()=>{console.log("SIMID: Session created")}),(()=>{console.log("SIMID: Session creation was rejected")}))}generateSessionId_(){const e=new Uint8Array(16);window.crypto.getRandomValues(e);const t=Array.from(Array(32).keys()).map((t=>{const i=t%2==0,s=e[Math.floor(t/2)];return i?s>>4:15&s}));t[12]=4,t[16]=8|3&t[16];const i=t.map((e=>e.toString(16))),s=[i.slice(0,8).join(""),i.slice(8,12).join(""),i.slice(12,16).join(""),i.slice(16,20).join(""),i.slice(20).join("")].join("-");this.sessionId_=s}setMessageTarget(e){this.target_=e}}class Re{constructor(e,t){this.simidProtocol=new ke,this.addListeners_(),this.rmpVast_=t,this.simidData_=t.creative.simid,this.adContainer_=t.adContainer,this.playerDiv_=t.contentWrapper,this.adPlayerUrl_=e,this.adParameters_=t.creative.simid.adParameters,this.adId_=t.creative.adId,this.creativeId_=t.creative.id,this.adServingId_=t.ad.adServingId,this.clickThroughUrl_=t.creative.clickThroughUrl,this.contentVideoElement_=t.currentContentPlayer,this.adVideoElement_=t.currentAdPlayer,this.simidIframe_=null,this.initializationPromise_=null,this.adVideoTrackingEvents_=new Map,this.contentVideoTrackingEvents_=new Map,this.isLinearAd_=t.creative.isLinear,this.nonLinearStartTime_=null,this.requestedDuration_=0,this.resolveSessionCreatedPromise_=null,this.sessionCreatedPromise_=new Promise((e=>{this.resolveSessionCreatedPromise_=e})),this.resolveInitializationPromise_=null,this.rejectInitializationPromise_=null,this.nonLinearDimensions_=null,this.durationInterval_=null,this.initializationPromise_=new Promise(((e,t)=>{this.resolveInitializationPromise_=e,this.rejectInitializationPromise_=t})),this.trackEventsOnAdVideoElement_(),this.trackEventsOnContentVideoElement_(),this.hideAdPlayer_(),u.print(this.rmpVast_.debugRawConsoleLogs,"SIMID: player created")}initializeAd(){this.isLinearAd_||this.isValidDimensions_(this.getNonlinearDimensions_())?(this.simidIframe_=this.createSimidIframe_(),this.isLinearAd_||this.displayNonlinearCreative_(),this.requestDuration_=0,this.initializationPromise_.catch((e=>{this.onAdInitializedFailed_(e)})),this.sessionCreatedPromise_.then((()=>{this.sendInitMessage_()})),u.print(this.rmpVast_.debugRawConsoleLogs,"SIMID: initializeAd")):u.print(this.rmpVast_.debugRawConsoleLogs,"SIMID: Unable to play a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size.")}playAd(){this.initializationPromise_.then((()=>{this.startCreativePlayback_()})).catch((e=>{console.warn(e)}))}playAdVideo(){this.adVideoElement_.play()}createSimidIframe_(){const e=document.createElement("iframe");return e.style.display="none",this.playerDiv_.appendChild(e),this.isLinearAd_&&e.classList.add("rmp-linear-simid-creative"),this.simidProtocol.setMessageTarget(e.contentWindow),e.setAttribute("allowFullScreen",""),e.setAttribute("allow","geolocation"),e.src=this.simidData_.fileURL,e}addListeners_(){this.simidProtocol.addListener(Ae.CREATE_SESSION,this.onSessionCreated_.bind(this)),this.simidProtocol.addListener(we.REQUEST_FULL_SCREEN,this.onRequestFullScreen.bind(this)),this.simidProtocol.addListener(we.REQUEST_PLAY,this.onRequestPlay.bind(this)),this.simidProtocol.addListener(we.REQUEST_PAUSE,this.onRequestPause.bind(this)),this.simidProtocol.addListener(we.FATAL_ERROR,this.onCreativeFatalError.bind(this)),this.simidProtocol.addListener(we.REQUEST_SKIP,this.onRequestSkip.bind(this)),this.simidProtocol.addListener(we.REQUEST_STOP,this.onRequestStop.bind(this)),this.simidProtocol.addListener(we.REQUEST_CHANGE_AD_DURATION,this.onRequestChangeAdDuration.bind(this)),this.simidProtocol.addListener(we.GET_MEDIA_STATE,this.onGetMediaState.bind(this)),this.simidProtocol.addListener(we.LOG,this.onReceiveCreativeLog.bind(this)),this.simidProtocol.addListener(we.EXPAND_NONLINEAR,this.onExpandResize.bind(this)),this.simidProtocol.addListener(we.COLLAPSE_NONLINEAR,this.onCollapse.bind(this)),this.simidProtocol.addListener(we.REQUEST_RESIZE,this.onRequestResize.bind(this))}onSessionCreated_(){this.resolveSessionCreatedPromise_()}destroySimidIframe_(){this.simidIframe_&&(this.simidIframe_.remove(),this.simidIframe_=null,this.simidProtocol.reset());for(let[e,t]of this.adVideoTrackingEvents_)this.adVideoElement_.removeEventListener(e,t,!0);for(let[e,t]of this.contentVideoTrackingEvents_)this.contentVideoElement_.removeEventListener(e,t,!0);this.adVideoTrackingEvents_.clear(),this.contentVideoTrackingEvents_.clear()}getFullDimensions_(e){const t=e.getBoundingClientRect();return{x:0,y:0,width:t.width,height:t.height}}isValidDimensions_(e){const t=this.playerDiv_.getBoundingClientRect(),i=parseInt(e.y)+parseInt(e.height)<=parseInt(t.height),s=parseInt(e.x)+parseInt(e.width)<=parseInt(t.width);return i&&s}getNonlinearDimensions_(){if(this.nonLinearDimensions_)return this.nonLinearDimensions_;let e={};return e.x=document.getElementById("x_val").value,e.y=document.getElementById("y_val").value,e.width=document.getElementById("width").value,e.height=document.getElementById("height").value,e}displayNonlinearCreative_(){const e=this.getNonlinearDimensions_();if(this.isValidDimensions_(e)){this.setSimidIframeDimensions_(e),this.simidIframe_.style.position="absolute",this.contentVideoElement_.play();const t=document.getElementById("duration").value;this.requestedDuration_=t}else u.print(this.rmpVast_.debugRawConsoleLogs,"SIMID: Unable to play a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size.")}setSimidIframeDimensions_(e){this.simidIframe_.style.height=e.height,this.simidIframe_.style.width=e.width,this.simidIframe_.style.left=`${e.x}px`,this.simidIframe_.style.top=`${e.y}px`}onExpandResize(e){if(this.isLinearAd_){const t={errorCode:Te,message:"Linear resize not yet supported."};this.simidProtocol.reject(e,t),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: ${t.message}`)}else{const t=this.getFullDimensions_(this.contentVideoElement_);this.setSimidIframeDimensions_(t),this.contentVideoElement_.pause(),this.simidProtocol.resolve(e)}}onCollapse(e){const t=this.getNonlinearDimensions_();if(this.isLinearAd_){const t={message:"Cannot collapse linear ads."};this.simidProtocol.reject(e,t),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: ${t.message}`)}else if(this.isValidDimensions_(t))this.setSimidIframeDimensions_(t),this.simidIframe_.style.position="absolute",this.contentVideoElement_.play(),this.simidProtocol.resolve(e);else{const t={message:"Unable to collapse to dimensions bigger than the player. Please modify dimensions to a smaller size."};this.simidProtocol.reject(e,t),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: ${t.message}`)}}onRequestResize(e){if(this.isLinearAd_){const t={errorCode:Te,message:"Linear resize not yet supported."};this.simidProtocol.reject(e,t),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: ${t.message}`)}else if(this.isValidDimensions_(e.args.creativeDimensions))this.nonLinearDimensions_=e.args.creativeDimensions,this.setSimidIframeDimensions_(e.args.creativeDimensions),this.simidProtocol.resolve(e);else{const t={errorCode:Te,message:"Unable to resize a non-linear ad with dimensions bigger than the player. Please modify dimensions to a smaller size."};this.simidProtocol.reject(e,t),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: ${t.message}`)}}sendInitMessage_(){const e={videoDimensions:this.getFullDimensions_(this.contentVideoElement_),creativeDimensions:this.isLinearAd_?this.getFullDimensions_(this.contentVideoElement_):this.getNonlinearDimensions_(),fullscreen:!1,fullscreenAllowed:!0,variableDurationAllowed:!0,skippableState:"adHandles",siteUrl:document.location.host,appId:"",useragent:window.navigator.userAgent,deviceId:"",muted:this.adVideoElement_.muted,volume:this.adVideoElement_.volume},t={adParameters:this.adParameters_,adId:this.adId_,creativeId:this.creativeId_,adServingId:this.adServingId_,clickThroughUrl:this.clickThroughUrl_};this.isLinearAd_||(t.duration=document.getElementById("duration").value);const i={environmentData:e,creativeData:t};this.simidProtocol.sendMessage(ve,i).then((e=>{this.resolveInitializationPromise_(e)})).catch((e=>{this.rejectInitializationPromise_(e)}))}startCreativePlayback_(){this.showSimidIFrame_(),this.isLinearAd_?this.playLinearVideoAd_():(this.nonLinearStartTime_=this.contentVideoElement_.currentTime,this.contentVideoElement_.play()),this.simidProtocol.sendMessage(fe)}playLinearVideoAd_(){this.contentVideoElement_.pause(),this.showAdPlayer_(),this.adVideoElement_.src=this.adPlayerUrl_,this.adVideoElement_.load(),this.adVideoElement_.play()}onAdInitializedFailed_(e){const t=JSON.stringify(e);u.print(this.rmpVast_.debugRawConsoleLogs,` SIMID: Ad init failed. ${t}`),this.destroyIframeAndResumeContent_(!0,t.errorCode)}hideSimidIFrame_(){this.simidIframe_.style.display="none"}showSimidIFrame_(){this.simidIframe_.style.display="block"}showAdPlayer_(){this.adVideoElement_.style.display="block",this.adContainer_.style.display="block"}hideAdPlayer_(){this.adVideoElement_.style.display="none",this.adContainer_.style.display="none"}trackEventsOnAdVideoElement_(){this.adVideoTrackingEvents_.set("durationchange",(()=>{this.simidProtocol.sendMessage("Media:durationchange",{duration:this.adVideoElement_.duration})})),this.adVideoTrackingEvents_.set("ended",this.videoComplete.bind(this)),this.adVideoTrackingEvents_.set("error",(()=>{this.simidProtocol.sendMessage("Media:error",{error:"",message:""})})),this.adVideoTrackingEvents_.set("pause",(()=>{this.simidProtocol.sendMessage("Media:pause")})),this.adVideoTrackingEvents_.set("play",(()=>{this.simidProtocol.sendMessage("Media:play")})),this.adVideoTrackingEvents_.set("playing",(()=>{this.simidProtocol.sendMessage("Media:playing")})),this.adVideoTrackingEvents_.set("seeked",(()=>{this.simidProtocol.sendMessage("Media:seeked")})),this.adVideoTrackingEvents_.set("seeking",(()=>{this.simidProtocol.sendMessage("Media:seeking")})),this.adVideoTrackingEvents_.set("timeupdate",(()=>{this.simidProtocol.sendMessage("Media:timeupdate",{currentTime:this.adVideoElement_.currentTime}),this.compareAdAndRequestedDurations_()})),this.adVideoTrackingEvents_.set("volumechange",(()=>{this.simidProtocol.sendMessage("Media:volumechange",{volume:this.adVideoElement_.volume})}));for(let[e,t]of this.adVideoTrackingEvents_)this.adVideoElement_.addEventListener(e,t,!0)}trackEventsOnContentVideoElement_(){this.contentVideoTrackingEvents_.set("timeupdate",(()=>{null!==this.nonLinearStartTime_&&this.contentVideoElement_.currentTime-this.nonLinearStartTime_>this.requestedDuration_&&this.stopAd(be.NON_LINEAR_DURATION_COMPLETE)}));for(let[e,t]of this.contentVideoTrackingEvents_)this.contentVideoElement_.addEventListener(e,t,!0)}stopAd(e=be.PLAYER_INITATED,t,i){this.simidIframe_&&(this.hideSimidIFrame_(),u.print(this.rmpVast_.debugRawConsoleLogs,` SIMID: stopAd ${e}`),this.simidProtocol.sendMessage(ye).then((()=>this.destroyIframeAndResumeContent_(t,i))))}skipAd(){this.hideSimidIFrame_(),this.simidProtocol.sendMessage(Ee).then((()=>this.destroyIframeAndResumeContent_()))}destroyIframeAndResumeContent_(e,t){this.destroySimidIframe_(),e?this.rmpVast_.rmpVastUtils.processVastErrors(t,!0):this.rmpVast_.rmpVastAdPlayer&&this.rmpVast_.rmpVastAdPlayer.resumeContent()}onRequestFullScreen(e){let t=null;this.simidIframe_.requestFullscreen?t=this.simidIframe_.requestFullscreen():this.simidIframe_.mozRequestFullScreen?t=this.simidIframe_.mozRequestFullScreen():this.simidIframe_.webkitRequestFullscreen?t=this.simidIframe_.webkitRequestFullscreen():this.simidIframe_.msRequestFullscreen&&(t=this.simidIframe_.msRequestFullscreen()),t?t.then((()=>this.simidProtocol.resolve(e))):this.simidProtocol.resolve(e)}onRequestPlay(e){if(this.isLinearAd_)this.adVideoElement_.play().then((()=>this.simidProtocol.resolve(e))).catch((()=>{const t={errorCode:1206,message:"The SIMID media could not be loaded."};this.simidProtocol.reject(e,t)}));else{const t={errorCode:1102,message:"Non linear ads do not play video."};this.simidProtocol.reject(e,t)}}onRequestPause(e){this.adVideoElement_.pause(),this.simidProtocol.resolve(e)}pauseAd(){this.adVideoElement_.pause()}onCreativeFatalError(e){this.simidProtocol.resolve(e),this.stopAd(be.CREATIVE_INITIATED,!0,1100)}onRequestSkip(e){this.simidProtocol.resolve(e),this.skipAd()}onRequestStop(e){this.simidProtocol.resolve(e),this.stopAd(be.CREATIVE_INITIATED)}onReportTracking(e){const t=e.args.trackingUrls;t.forEach((e=>{this.rmpVast_.rmpVastTracking.pingURI(e)})),u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: The creative has asked for the player to ping ${t}`)}videoComplete(){if(this.simidProtocol.sendMessage("Media:ended"),0===this.requestedDuration_)this.stopAd(be.MEDIA_PLAYBACK_COMPLETE);else if(-2!==this.requestedDuration_){const e=1e3*(this.requestedDuration_-this.adVideoElement_.duration);window.setTimeout((()=>{this.stopAd(be.CREATIVE_INITIATED)}),e)}}onRequestChangeAdDuration(e){const t=e.args.duration;if(-2!==t&&t<0){const t={errorCode:1202,message:"A negative duration is not valid."};this.simidProtocol.reject(e,t)}else this.requestedDuration_=t,this.compareAdAndRequestedDurations_(),this.simidProtocol.resolve(e)}compareAdAndRequestedDurations_(){0!==this.requestedDuration_&&-2!==this.requestedDuration_&&this.adVideoElement_.currentTime>=this.requestedDuration_&&this.stopAd(be.CREATIVE_INITATED)}onGetMediaState(e){const t={currentSrc:this.adVideoElement_.currentSrc,currentTime:this.adVideoElement_.currentTime,duration:this.adVideoElement_.duration,ended:this.adVideoElement_.ended,muted:this.adVideoElement_.muted,paused:this.adVideoElement_.paused,volume:this.adVideoElement_.volume,fullscreen:this.adVideoElement_.fullscreen};this.simidProtocol.resolve(e,t)}onReceiveCreativeLog(e){const t=e.args.message;u.print(this.rmpVast_.debugRawConsoleLogs,`SIMID: Received message from creative: ${t}`)}sendLog(e){const t={message:e};this.simidProtocol.sendMessage("Player:log",t)}}function Ie(e,t,i){Ve(e,t),t.set(e,i)}function Ve(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Se(e,t){return e.get(Le(e,t))}function Pe(e,t,i){return e.set(Le(e,t),i),i}function Le(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var _e=new WeakMap,Ue=new WeakMap,Ne=new WeakMap,Me=new WeakMap,xe=new WeakMap,Be=new WeakMap,De=new WeakMap,Oe=new WeakMap,We=new WeakMap,Fe=new WeakMap,qe=new WeakMap,je=new WeakMap,ze=new WeakMap,He=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,Ge=new WeakMap,Je=new WeakMap,Ze=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,ot=new WeakSet;class lt{constructor(e){!function(e,t){Ve(e,t),t.add(e)}(this,ot),Ie(this,_e,void 0),Ie(this,Ue,void 0),Ie(this,Ne,void 0),Ie(this,Me,void 0),Ie(this,xe,void 0),Ie(this,Be,640),Ie(this,De,360),Ie(this,Oe,"normal"),Ie(this,We,500),Ie(this,Fe,""),Ie(this,qe,null),Ie(this,je,null),Ie(this,ze,null),Ie(this,He,!1),Ie(this,Ye,null),Ie(this,Qe,{}),Ie(this,Ge,null),Ie(this,Je,!1),Ie(this,Ze,-1),Ie(this,Ke,-1),Ie(this,Xe,null),Ie(this,$e,null),Ie(this,et,null),Ie(this,tt,-1),Ie(this,it,1),Ie(this,st,!0),Ie(this,nt,null),Ie(this,rt,null),Ie(this,at,null),Pe(_e,this,e),Pe(Ue,this,e.adContainer),Pe(Ne,this,e.currentAdPlayer),Pe(Me,this,e.params),Pe(xe,this,e.adParametersData)}getAdWidth(){return Se(qe,this)&&"function"==typeof Se(qe,this).getAdWidth?Se(qe,this).getAdWidth():-1}getAdHeight(){return Se(qe,this)&&"function"==typeof Se(qe,this).getAdHeight?Se(qe,this).getAdHeight():-1}getAdDuration(){if(Se(qe,this)){if("function"==typeof Se(qe,this).getAdDuration)return Se(qe,this).getAdDuration();if(Se(Ke,this)>-1)return Se(Ke,this)}return-1}getAdRemainingTime(){return Se(tt,this)>=0?Se(tt,this):-1}getCreativeUrl(){return Se(Fe,this)?Se(Fe,this):""}getAdVolume(){return Se(qe,this)&&"function"==typeof Se(qe,this).getAdVolume?Se(qe,this).getAdVolume():-1}getAdPaused(){return Se(st,this)}getAdExpanded(){return!(!Se(qe,this)||"function"!=typeof Se(qe,this).getAdExpanded)&&Se(qe,this).getAdExpanded()}getAdSkippableState(){return!(!Se(qe,this)||"function"!=typeof Se(qe,this).getAdSkippableState)&&Se(qe,this).getAdSkippableState()}getAdCompanions(){return Se(qe,this)&&"function"==typeof Se(qe,this).getAdCompanions?Se(qe,this).getAdCompanions():""}resizeAd(e,t,i){if(!Se(qe,this))return;if(!o.isNumber(e)||!o.isNumber(t)||"string"!=typeof i)return;if(e<=0||t<=0)return;let s="normal";"fullscreen"===i&&(s=i),u.print(Se(_e,this).debugRawConsoleLogs,`VPAID resizeAd with width ${e}, height ${t}, viewMode ${i}`),Se(qe,this).resizeAd(e,t,s)}stopAd(){Se(qe,this)&&(u.print(Se(_e,this).debugRawConsoleLogs,"stopAd"),Pe(Xe,this,window.setTimeout((()=>{Le(ot,this,ct).call(this)}),Se(Me,this).creativeLoadTimeout)),Se(qe,this).stopAd())}pauseAd(){u.print(Se(_e,this).debugRawConsoleLogs,"pauseAd"),Se(qe,this)&&!Se(st,this)&&Se(qe,this).pauseAd()}resumeAd(){u.print(Se(_e,this).debugRawConsoleLogs,"resumeAd"),Se(qe,this)&&Se(st,this)&&Se(qe,this).resumeAd()}expandAd(){Se(qe,this)&&Se(qe,this).expandAd()}collapseAd(){Se(qe,this)&&Se(qe,this).collapseAd()}skipAd(){Se(qe,this)&&(Pe($e,this,window.setTimeout((()=>{Le(ot,this,ct).call(this)}),Se(Me,this).creativeLoadTimeout)),Se(qe,this).skipAd())}setAdVolume(e){Se(qe,this)&&o.isNumber(e)&&e>=0&&e<=1&&"function"==typeof Se(qe,this).setAdVolume&&Se(qe,this).setAdVolume(e)}init(e,t){if(Pe(Be,this,t.width),Pe(De,this,t.height),Pe(Oe,this,t.viewMode),Pe(We,this,t.desiredBitrate),Pe(Fe,this,e),!Se(Ne,this)){let e=null;if(Se(Ue,this)&&(e=Se(Ue,this).querySelector(".rmp-ad-vast-video-player")),null===e)return void Se(_e,this).rmpVastUtils.processVastErrors(900,!0);Pe(Ne,this,e)}Se(_e,this).rmpVastContentPlayer.pause(),Pe(ze,this,document.createElement("iframe")),Se(ze,this).sandbox="allow-scripts allow-same-origin",Se(ze,this).id="vpaid-frame",o.setStyle(Se(ze,this),{visibility:"hidden",width:"0px",height:"0px",border:"none"}),Se(ze,this).onload=()=>{if(u.print(Se(_e,this).debugRawConsoleLogs,"#vpaidIframe.onload"),!Se(ze,this).contentWindow||!Se(ze,this).contentWindow.document||!Se(ze,this).contentWindow.document.body)return void Se(_e,this).rmpVastUtils.processVastErrors(901,!0);const e=Se(ze,this).contentWindow.document,t=e.body;Pe(je,this,e.createElement("script")),Pe(nt,this,window.setTimeout((()=>{u.print(Se(_e,this).debugRawConsoleLogs,"could not load VPAID JS Creative or getVPAIDAd in iframeWindow - resume content"),Se(je,this).onload=null,Se(je,this).onerror=null,Se(_e,this).rmpVastAdPlayer&&Se(_e,this).rmpVastAdPlayer.resumeContent()}),Se(Me,this).creativeLoadTimeout)),Se(je,this).onload=Le(ot,this,Ot).bind(this),Se(je,this).onerror=Le(ot,this,Wt).bind(this),t.appendChild(Se(je,this)),Se(je,this).src=Se(Fe,this)},Se(ze,this).src="about:blank",Se(Ue,this).prepend(Se(ze,this))}destroy(){u.print(Se(_e,this).debugRawConsoleLogs,"destroy VPAID dependencies"),window.clearInterval(Se(rt,this)),window.clearInterval(Se(et,this)),window.clearTimeout(Se(nt,this)),window.clearTimeout(Se(Ye,this)),window.clearTimeout(Se(Ge,this)),Le(ot,this,xt).call(this),Se(je,this)&&(Se(je,this).onload=null,Se(je,this).onerror=null),Se(at,this)&&o.removeElement(Se(at,this)),Se(ze,this)&&o.removeElement(Se(ze,this))}}function dt(){Pe(He,this,!0),Se(qe,this)&&(window.clearTimeout(Se(Ye,this)),Se(Qe,this).AdLoaded&&Se(qe,this).unsubscribe(Se(Qe,this).AdLoaded,"AdLoaded"),Pe(Ge,this,window.setTimeout((()=>{!Se(Je,this)&&Se(_e,this).rmpVastAdPlayer&&Se(_e,this).rmpVastAdPlayer.resumeContent(),Pe(Je,this,!1)}),Se(Me,this).creativeLoadTimeout)),Se(_e,this).__adOnStage=!0,Se(qe,this).startAd(),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adloaded"))}function ht(){Pe(Je,this,!0),Se(qe,this)&&(window.clearTimeout(Se(Ge,this)),Se(Qe,this).AdStarted&&Se(qe,this).unsubscribe(Se(Qe,this).AdStarted,"AdStarted"),1===Se(Ze,this)&&Pe(Ke,this,Se(qe,this).getAdRemainingTime()),!Se(qe,this).getAdIcons()&&Se(_e,this).rmpVastIcons&&Se(_e,this).rmpVastIcons.iconsData.length>0&&Se(_e,this).rmpVastIcons.append(),"function"==typeof Se(qe,this).getAdLinear&&(Se(_e,this).creative.isLinear=Se(qe,this).getAdLinear()),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adcreativeview"))}function ct(){u.print(Se(_e,this).debugRawConsoleLogs,"VPAID AdStopped event"),window.clearTimeout(Se(Xe,this)),Se(_e,this).rmpVastAdPlayer&&Se(_e,this).rmpVastAdPlayer.resumeContent()}function pt(){window.clearTimeout(Se($e,this)),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adskipped")}function ut(){Se(_e,this).rmpVastUtils.createApiEvent("adskippablestatechanged")}function mt(){if(Se(qe,this)&&"function"==typeof Se(qe,this).getAdRemainingTime){const e=Se(qe,this).getAdRemainingTime();e>=0&&Pe(tt,this,e),window.clearInterval(Se(et,this)),Pe(et,this,window.setInterval((()=>{const e=Se(qe,this).getAdRemainingTime();e>=0&&Pe(tt,this,e)}),200)),Se(_e,this).rmpVastUtils.createApiEvent("addurationchange")}}function gt(){let e=-1;Se(qe,this)&&(e=Se(qe,this).getAdVolume()),"number"==typeof e&&e>=0&&(Se(it,this)>0&&0===e?Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("advolumemuted"):0===Se(it,this)&&e>0&&Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("advolumeunmuted"),Pe(it,this,e),Se(_e,this).rmpVastUtils.createApiEvent("advolumechanged"))}function At(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adimpression")}function vt(){Pe(st,this,!1);let e=-1;Se(qe,this)&&(e=Se(qe,this).getAdVolume()),"number"==typeof e&&e>=0&&(Pe(it,this,e),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adstarted"))}function ft(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adfirstquartile")}function Et(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("admidpoint")}function yt(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adthirdquartile")}function wt(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adcomplete")}function Ct(e,t,i){if(Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adclick"),"boolean"==typeof i&&i){let t;e?t=e:Se(_e,this).creative.clickThroughUrl&&(t=Se(_e,this).creative.clickThroughUrl),t&&(Se(_e,this).creative.clickThroughUrl=t,o.openWindow(Se(_e,this).creative.clickThroughUrl))}}function Tt(){Pe(st,this,!0),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adpaused")}function bt(){Pe(st,this,!1),Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adresumed")}function kt(e){u.print(Se(_e,this).debugRawConsoleLogs,`VPAID AdLog event ${e}`)}function Rt(e){u.print(Se(_e,this).debugRawConsoleLogs,`VPAID AdError event ${e}`),Se(_e,this).rmpVastUtils.processVastErrors(901,!0)}function It(){Se(_e,this).rmpVastUtils.createApiEvent("adinteraction")}function Vt(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("aduseracceptinvitation")}function St(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adcollapse")}function Pt(){Se(_e,this).rmpVastTracking.dispatchTrackingAndApiEvent("adclosed")}function Lt(){Se(_e,this).rmpVastUtils.createApiEvent("adsizechange")}function _t(){Se(qe,this)&&"function"==typeof Se(qe,this).getAdLinear&&(Se(_e,this).creative.isLinear=Se(qe,this).getAdLinear(),Se(_e,this).rmpVastUtils.createApiEvent("adlinearchange"))}function Ut(){Se(_e,this).rmpVastUtils.createApiEvent("adexpandedchange")}function Nt(){if(Se(qe,this)&&"function"==typeof Se(qe,this).getAdRemainingTime){const e=Se(qe,this).getAdRemainingTime();e>=0&&Pe(tt,this,e),Se(_e,this).rmpVastUtils.createApiEvent("adremainingtimechange")}}function Mt(){Se(qe,this)&&(Pe(Qe,this,{AdLoaded:Le(ot,this,dt).bind(this),AdStarted:Le(ot,this,ht).bind(this),AdStopped:Le(ot,this,ct).bind(this),AdSkipped:Le(ot,this,pt).bind(this),AdSkippableStateChange:Le(ot,this,ut).bind(this),AdDurationChange:Le(ot,this,mt).bind(this),AdVolumeChange:Le(ot,this,gt).bind(this),AdImpression:Le(ot,this,At).bind(this),AdVideoStart:Le(ot,this,vt).bind(this),AdVideoFirstQuartile:Le(ot,this,ft).bind(this),AdVideoMidpoint:Le(ot,this,Et).bind(this),AdVideoThirdQuartile:Le(ot,this,yt).bind(this),AdVideoComplete:Le(ot,this,wt).bind(this),AdClickThru:Le(ot,this,Ct).bind(this),AdPaused:Le(ot,this,Tt).bind(this),AdPlaying:Le(ot,this,bt).bind(this),AdLog:Le(ot,this,kt).bind(this),AdError:Le(ot,this,Rt).bind(this),AdInteraction:Le(ot,this,It).bind(this),AdUserAcceptInvitation:Le(ot,this,Vt).bind(this),AdUserMinimize:Le(ot,this,St).bind(this),AdUserClose:Le(ot,this,Pt).bind(this),AdSizeChange:Le(ot,this,Lt).bind(this),AdLinearChange:Le(ot,this,_t).bind(this),AdExpandedChange:Le(ot,this,Ut).bind(this),AdRemainingTimeChange:Le(ot,this,Nt).bind(this)}),Object.keys(Se(Qe,this)).forEach((e=>{Se(qe,this).subscribe(Se(Qe,this)[e],e)})))}function xt(){Se(qe,this)&&Object.keys(Se(Qe,this)).forEach((e=>{Se(qe,this).unsubscribe(Se(Qe,this)[e],e)}))}function Bt(e){return"function"==typeof e.initAd&&"function"==typeof e.startAd&&"function"==typeof e.stopAd&&"function"==typeof e.skipAd&&"function"==typeof e.resizeAd&&"function"==typeof e.pauseAd&&"function"==typeof e.resumeAd&&"function"==typeof e.expandAd&&"function"==typeof e.collapseAd&&"function"==typeof e.subscribe&&"function"==typeof e.unsubscribe}function Dt(){if(window.clearInterval(Se(rt,this)),window.clearTimeout(Se(nt,this)),Pe(qe,this,Se(ze,this).contentWindow.getVPAIDAd()),Se(qe,this)&&"function"==typeof Se(qe,this).handshakeVersion){let e;try{e=Se(qe,this).handshakeVersion("2.0")}catch(e){return console.warn(e),u.print(Se(_e,this).debugRawConsoleLogs,"could not validate VPAID ad unit handshakeVersion"),void Se(_e,this).rmpVastUtils.processVastErrors(901,!0)}if(Pe(Ze,this,parseInt(e)),Se(Ze,this)<1)return u.print(Se(_e,this).debugRawConsoleLogs,"unsupported VPAID version - exit"),void Se(_e,this).rmpVastUtils.processVastErrors(901,!0);if(!Le(ot,this,Bt).call(this,Se(qe,this)))return u.print(Se(_e,this).debugRawConsoleLogs,"VPAID creative does not conform to VPAID spec - exit"),void Se(_e,this).rmpVastUtils.processVastErrors(901,!0);Le(ot,this,Mt).call(this),Se(_e,this).rmpVastTracking.wire();const t={};t.AdParameters=Se(xe,this),u.print(Se(_e,this).debugRawConsoleLogs,"VPAID AdParameters follow",Se(xe,this)),o.show(Se(Ue,this)),o.show(Se(Ne,this));const i={};Pe(at,this,document.createElement("div")),Se(at,this).className="rmp-vpaid-container",Se(Ue,this).appendChild(Se(at,this)),i.slot=Se(at,this),i.videoSlot=Se(Ne,this),i.videoSlotCanAutoPlay=!0,Pe(Ye,this,window.setTimeout((()=>{Se(He,this)||(u.print(Se(_e,this).debugRawConsoleLogs,"#initAdTimeout"),Se(_e,this).rmpVastAdPlayer&&Se(_e,this).rmpVastAdPlayer.resumeContent()),Pe(He,this,!1)}),10*Se(Me,this).creativeLoadTimeout)),u.print(Se(_e,this).debugRawConsoleLogs,"calling initAd on VPAID creative now"),Se(qe,this).initAd(Se(Be,this),Se(De,this),Se(Oe,this),Se(We,this),t,i)}}function Ot(){u.print(Se(_e,this).debugRawConsoleLogs,"VPAID JS loaded");const e=Se(ze,this).contentWindow;"function"==typeof e.getVPAIDAd?Le(ot,this,Dt).call(this):Pe(rt,this,window.setInterval((()=>{"function"==typeof e.getVPAIDAd&&Le(ot,this,Dt).call(this)}),100)),Se(je,this).onload=null,Se(je,this).onerror=null}function Wt(){u.print(Se(_e,this).debugRawConsoleLogs,"VPAID JS error loading"),Se(_e,this).rmpVastUtils.processVastErrors(901,!0),Se(je,this).onload=null,Se(je,this).onerror=null}function Ft(e,t,i){qt(e,t),t.set(e,i)}function qt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jt(e,t){return e.get(Ht(e,t))}function zt(e,t,i){return e.set(Ht(e,t),i),i}function Ht(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var Yt=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Kt=new WeakMap,Xt=new WeakMap,$t=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,si=new WeakMap,ni=new WeakMap,ri=new WeakMap,ai=new WeakMap,oi=new WeakMap,li=new WeakMap,di=new WeakMap,hi=new WeakMap,ci=new WeakMap,pi=new WeakMap,ui=new WeakMap,mi=new WeakSet;class gi{constructor(e){!function(e,t){qt(e,t),t.add(e)}(this,mi),Ft(this,Yt,void 0),Ft(this,Qt,void 0),Ft(this,Gt,void 0),Ft(this,Jt,void 0),Ft(this,Zt,void 0),Ft(this,Kt,!0),Ft(this,Xt,null),Ft(this,$t,null),Ft(this,ei,null),Ft(this,ti,null),Ft(this,ii,null),Ft(this,si,!1),Ft(this,ni,null),Ft(this,ri,null),Ft(this,ai,null),Ft(this,oi,null),Ft(this,li,null),Ft(this,di,null),Ft(this,hi,null),Ft(this,ci,[]),Ft(this,pi,0),Ft(this,ui,!1),zt(Yt,this,e),zt(Qt,this,e.params),zt(Gt,this,e.adContainer),zt(Jt,this,e.currentAdPlayer),zt(Zt,this,e.currentContentPlayer)}get hlsJSInstances(){return jt(ci,this)}get hlsJSIndex(){return jt(pi,this)}set hlsJSIndex(e){zt(pi,this,e)}get readingHlsJS(){return jt(ui,this)}set readingHlsJS(e){zt(ui,this,e)}get skippableAdCanBeSkipped(){return jt(si,this)}destroy(){jt(Xt,this)&&(jt(Xt,this).removeEventListener("touchend",jt(di,this)),o.removeElement(jt(Xt,this))),window.clearTimeout(jt(hi,this)),o.removeElement(jt(ii,this)),jt(Jt,this)&&(jt(Jt,this).removeEventListener("click",jt(di,this)),jt(Jt,this).removeEventListener("timeupdate",jt(ni,this)),jt(Jt,this).removeEventListener("durationchange",jt(ri,this)),jt(Jt,this).removeEventListener("loadedmetadata",jt(ai,this)),jt(Jt,this).removeEventListener("contextmenu",jt(oi,this)),jt(Jt,this).removeEventListener("error",jt(li,this))),jt(Zt,this).removeEventListener("error",jt(li,this))}update(e,t){if(u.print(jt(Yt,this).debugRawConsoleLogs,`update ad player for linear creative of type ${t} located at ${e}`),zt(ri,this,Ht(mi,this,Ai).bind(this)),jt(Jt,this).addEventListener("durationchange",jt(ri,this),{once:!0}),zt(ai,this,Ht(mi,this,vi).bind(this)),jt(Jt,this).addEventListener("loadedmetadata",jt(ai,this),{once:!0}),zt(oi,this,o.stopPreventEvent),jt(Jt,this).addEventListener("contextmenu",jt(oi,this)),zt(li,this,Ht(mi,this,Ei).bind(this)),zt(hi,this,window.setTimeout((()=>{jt(Yt,this).rmpVastUtils.processVastErrors(402,!0)}),jt(Qt,this).creativeLoadTimeout)),jt(Qt,this).useHlsJS&&"application/vnd.apple.mpegurl"===t&&void 0!==window.Hls&&Hls.isSupported()){zt(ui,this,!0);const t={debug:jt(Qt,this).debugHlsJS,capLevelToPlayerSize:!0,testBandwidth:!0,startLevel:-1,lowLatencyMode:!1};jt(ci,this)[jt(pi,this)]=new Hls(t),jt(ci,this)[jt(pi,this)].on(Hls.Events.ERROR,Ht(mi,this,bi).bind(this)),jt(ci,this)[jt(pi,this)].loadSource(e),jt(ci,this)[jt(pi,this)].attachMedia(jt(Jt,this))}else void 0===jt(Yt,this).creative.simid||jt(Yt,this).creative.simid&&!jt(Qt,this).enableSimid?(jt(Jt,this).addEventListener("error",jt(li,this)),jt(Jt,this).src=e,jt(Jt,this).load()):(jt(Yt,this).rmpVastSimidPlayer&&jt(Yt,this).rmpVastSimidPlayer.stopAd(),jt(Yt,this).rmpVastSimidPlayer=new Re(e,jt(Yt,this)),jt(Yt,this).rmpVastSimidPlayer.initializeAd(),jt(Yt,this).rmpVastSimidPlayer.playAd());zt(di,this,Ht(mi,this,fi).bind(this)),jt(Yt,this).creative.clickThroughUrl&&(d.isMobile?(zt(Xt,this,document.createElement("a")),jt(Xt,this).className="rmp-ad-click-ui-mobile",jt(Xt,this).textContent=jt(Qt,this).labels.textForInteractionUIOnMobile,jt(Xt,this).addEventListener("touchend",jt(di,this)),jt(Xt,this).href=jt(Yt,this).creative.clickThroughUrl,jt(Xt,this).target="_blank",jt(Gt,this).appendChild(jt(Xt,this))):jt(Jt,this).addEventListener("click",jt(di,this))),jt(Yt,this).creative.isSkippableAd&&Ht(mi,this,Ti).call(this)}parse(e){const t=e.icons,i=e.adParameters,s=e.mediaFiles;if(0===s.length)return;t.length>0&&(jt(Yt,this).rmpVastIcons=new ce(jt(Yt,this)),jt(Yt,this).rmpVastIcons.parse(t)),jt(Yt,this).adParametersData="",i&&i.value&&(jt(Yt,this).adParametersData=i.value);let n=[],r=!1;for(let e=0;e<s.length;e++){const t=s[e],i=t.fileURL,a=t.mimeType;if(null===i||null===a)continue;const o={};o.url=i,o.type=a,null!==t.codec&&(o.codec=t.codec);const l=/vpaid/i,d=/\/javascript/i;if(jt(Qt,this).enableVpaid&&t.apiFramework&&l.test(t.apiFramework)&&d.test(a)){u.print(jt(Yt,this).debugRawConsoleLogs,"VPAID creative detected"),n=[o],r=!0;break}o.width=t.width,o.height=t.height,o.bitrate=t.bitrate,n.push(o)}const a=[];for(let e=0;e<n.length;e++){const t=n[e],i=t.type,s=t.url;if(r&&s)return jt(Yt,this).rmpVastVpaidPlayer=new lt(jt(Yt,this)),jt(Yt,this).rmpVastVpaidPlayer.init(s,jt(Qt,this).vpaidSettings),void(jt(Yt,this).creative.type=i);if(jt(Yt,this).rmpVastAdPlayer){if("application/vnd.apple.mpegurl"===i&&(d.checkCanPlayType(i)||void 0!==window.Hls&&Hls.isSupported()))return jt(Yt,this).rmpVastAdPlayer.append(s,i),void(jt(Yt,this).creative.type=i);if(d.checkCanPlayType("application/dash+xml"))return jt(Yt,this).rmpVastAdPlayer.append(s,i),void(jt(Yt,this).creative.type=i)}a.push(t)}if(r)return;let l=[];const h=["video/webm","video/mp4","video/ogg","video/3gpp"],c=(e,t)=>t.codec&&t.type===h[e]?d.checkCanPlayType(t.type,t.codec):t.type===h[e]&&d.checkCanPlayType(t.type);for(let e=0;e<h.length&&(l=a.filter(c.bind(null,e)),!(l.length>0));e++);if(0===l.length){const e=(e,t,i)=>i.codec===e&&i.type===t;a.forEach((t=>{t.codec&&t.type&&d.checkCanPlayType(t.type,t.codec)&&(l=a.filter(e.bind(null,t.codec,t.type)))}))}if(0===l.length){const e=(e,t)=>t.type===e;a.forEach((t=>{t.type&&d.checkCanPlayType(t.type)&&(l=a.filter(e.bind(null,t.type)))}))}if(0===l.length)return void jt(Yt,this).rmpVastUtils.processVastErrors(403,!0);let p;l.sort(((e,t)=>e.width-t.width)),u.print(jt(Yt,this).debugRawConsoleLogs,"Vavailable linear creative follows",l);let m=[],g=[];if(l.length>1){const e=o.getWidth(jt(Yt,this).container)*d.devicePixelRatio,t=o.getHeight(jt(Yt,this).container)*d.devicePixelRatio;e>0&&t>0&&(m=l.filter((i=>e>=i.width&&t>=i.height))),u.print(jt(Yt,this).debugRawConsoleLogs,"validCreativesByWidth follow",m),0===m.length&&(m=[l[0]]);let i=(new ge).bandwidthData.estimate;u.print(jt(Yt,this).debugRawConsoleLogs,`availableBandwidth is ${i} Mbps`),i>-1&&m.length>1&&(m.sort(((e,t)=>e.bitrate-t.bitrate)),i=Math.round(1e3*i),g=m.filter((e=>i>=e.bitrate)),u.print(jt(Yt,this).debugRawConsoleLogs,"validCreativesByBitrate follow",g),p=g[g.length-1])}p||(m.length>0?p=m[m.length-1]:(l.sort(((e,t)=>e.bitrate-t.bitrate)),p=l[l.length-1])),u.print(jt(Yt,this).debugRawConsoleLogs,"selected linear creative follows",p),jt(Yt,this).creative.mediaUrl=p.url,jt(Yt,this).creative.height=p.height,jt(Yt,this).creative.width=p.width,jt(Yt,this).creative.type=p.type,jt(Yt,this).rmpVastAdPlayer&&jt(Yt,this).rmpVastAdPlayer.append(p.url,p.type)}}function Ai(){let e=-1;jt(Yt,this).rmpVastAdPlayer&&(e=jt(Yt,this).rmpVastAdPlayer.duration),jt(Yt,this).rmpVastUtils.createApiEvent("addurationchange"),-1!==e&&(Object.keys(jt(Yt,this).creative.trackingEvents).forEach((t=>{if(/progress-/i.test(t)){const i=t.split("-")[1];if(/%/i.test(i)){let s=i.slice(0,-1);s=e*parseFloat(s)/100,jt(Yt,this).creative.trackingEvents[t].forEach((e=>{jt(Yt,this).progressEvents.push({time:s,url:e})}))}else jt(Yt,this).creative.trackingEvents[t].forEach((e=>{jt(Yt,this).progressEvents.push({time:1e3*parseFloat(i),url:e})}))}})),jt(Yt,this).progressEvents.length>0&&jt(Yt,this).progressEvents.sort(((e,t)=>e.time-t.time)))}function vi(){window.clearTimeout(jt(hi,this)),jt(Jt,this)&&(jt(Jt,this).volume!==jt(Zt,this).volume&&(jt(Jt,this).volume=jt(Zt,this).volume),jt(Zt,this).muted?jt(Jt,this).muted=!0:jt(Jt,this).muted=!1),o.show(jt(Gt,this)),o.show(jt(Jt,this)),jt(Yt,this).__adOnStage=!0,jt(Yt,this).rmpVastAdPlayer&&(jt(Yt,this).rmpVastAdPlayer.play(jt(Kt,this)),zt(Kt,this,!1)),jt(Yt,this).rmpVastTracking.dispatchTrackingAndApiEvent("adloaded")}function fi(e){e&&e.stopPropagation(),d.isMobile||o.openWindow(jt(Yt,this).creative.clickThroughUrl),jt(Yt,this).pause(),jt(Yt,this).rmpVastTracking.dispatchTrackingAndApiEvent("adclick")}function Ei(e){if(e&&e.target){const t=e.target;if(t.error&&o.isNumber(t.error.code)){const e=t.error.code;let i="";"string"==typeof t.error.message&&(i=t.error.message);const s=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];console.error(`Error on video element with code ${e.toString()} and message ${i}`),u.print(jt(Yt,this).debugRawConsoleLogs,`error type is ${s[e]?s[e]:"unknown type"}`),4===e&&jt(Yt,this).rmpVastUtils.processVastErrors(401,!0)}}}function yi(e){Math.round(e)>0&&(jt($t,this).textContent=jt(Qt,this).labels.skipMessage+" "+Math.round(e)+"s")}function wi(){"none"===jt(ii,this).style.display&&o.setStyle(jt(ii,this),{display:"block"});const e=jt(Jt,this).currentTime;o.isNumber(e)&&e>0&&(e>=jt(Yt,this).creative.skipoffset?(jt(Jt,this).removeEventListener("timeupdate",jt(ni,this)),o.setStyle(jt($t,this),{display:"none"}),o.setStyle(jt(ei,this),{display:"block"}),o.setStyle(jt(ti,this),{display:"block"}),zt(si,this,!0),jt(Yt,this).rmpVastUtils.createApiEvent("adskippablestatechanged")):jt(Yt,this).creative.skipoffset-e>0&&Ht(mi,this,yi).call(this,jt(Yt,this).creative.skipoffset-e))}function Ci(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),jt(si,this)&&(jt(Yt,this).rmpVastTracking.dispatchTrackingAndApiEvent("adskipped"),jt(Yt,this).rmpVastAdPlayer&&jt(Yt,this).rmpVastAdPlayer.resumeContent())}function Ti(){const e=jt(Qt,this).labels.skipMessage;zt(ii,this,document.createElement("div")),jt(ii,this).className="rmp-ad-container-skip",o.setStyle(jt(ii,this),{display:"none"}),o.makeButtonAccessible(jt(ii,this),e),zt($t,this,document.createElement("div")),jt($t,this).className="rmp-ad-container-skip-waiting",Ht(mi,this,yi).call(this,jt(Yt,this).creative.skipoffset),o.setStyle(jt($t,this),{display:"block"}),zt(ei,this,document.createElement("div")),jt(ei,this).className="rmp-ad-container-skip-message",jt(ei,this).textContent=e,o.setStyle(jt(ei,this),{display:"none"}),zt(ti,this,document.createElement("div")),jt(ti,this).className="rmp-ad-container-skip-icon",o.setStyle(jt(ti,this),{display:"none"});const t=Ht(mi,this,Ci).bind(this);o.addEvents(["click","touchend"],jt(ii,this),t),jt(ii,this).appendChild(jt($t,this)),jt(ii,this).appendChild(jt(ei,this)),jt(ii,this).appendChild(jt(ti,this)),jt(Gt,this).appendChild(jt(ii,this)),zt(ni,this,Ht(mi,this,wi).bind(this)),jt(Jt,this).addEventListener("timeupdate",jt(ni,this))}function bi(e,t){if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:jt(ci,this)[jt(pi,this)].startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:jt(ci,this)[jt(pi,this)].recoverMediaError();break;default:jt(Yt,this).rmpVastUtils.processVastErrors(900,!0)}}function ki(e,t,i){Ri(e,t),t.set(e,i)}function Ri(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ii(e,t){return e.get(Si(e,t))}function Vi(e,t,i){return e.set(Si(e,t),i),i}function Si(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var Pi=new WeakMap,Li=new WeakMap,_i=new WeakMap,Ui=new WeakMap,Ni=new WeakMap,Mi=new WeakMap,xi=new WeakMap,Bi=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Wi=new WeakMap,Fi=new WeakSet;class qi{constructor(e){!function(e,t){Ri(e,t),t.add(e)}(this,Fi),ki(this,Pi,void 0),ki(this,Li,void 0),ki(this,_i,void 0),ki(this,Ui,void 0),ki(this,Ni,0),ki(this,Mi,!0),ki(this,xi,null),ki(this,Bi,null),ki(this,Di,null),ki(this,Oi,null),ki(this,Wi,null),Vi(Pi,this,e),Vi(Li,this,e.params),Vi(_i,this,e.adContainer),Vi(Ui,this,e.container)}destroy(){window.clearTimeout(Ii(Wi,this));try{o.removeElement(Ii(Oi,this))}catch(e){console.warn(e)}}update(){if(Vi(Oi,this,document.createElement("div")),Ii(Oi,this).className="rmp-ad-non-linear-container",o.setStyle(Ii(Oi,this),{width:Ii(Pi,this).creative.width.toString()+"px",height:Ii(Pi,this).creative.height.toString()+"px"}),Vi(Bi,this,document.createElement("a")),Ii(Bi,this).className="rmp-ad-non-linear-anchor",Ii(Pi,this).creative.clickThroughUrl){Ii(Bi,this).href=Ii(Pi,this).creative.clickThroughUrl,Ii(Bi,this).target="_blank";const e=Si(Fi,this,Hi).bind(this);o.addEvents(["touchend","click"],Ii(Bi,this),e)}"image"===Ii(Pi,this).creative.nonLinearType?Vi(Di,this,document.createElement("img")):(Vi(Di,this,document.createElement("iframe")),Ii(Di,this).sandbox="allow-scripts allow-same-origin",o.setStyle(Ii(Di,this),{border:"none",overflow:"hidden"}),Ii(Di,this).setAttribute("allow","autoplay; fullscreen; picture-in-picture; encrypted-media"),Ii(Di,this).setAttribute("scrolling","no"),Ii(Di,this).setAttribute("sandbox","allow-scripts allow-presentation allow-same-origin")),Ii(Di,this).className="rmp-ad-non-linear-creative";const e=Si(Fi,this,ji).bind(this);Ii(Di,this).addEventListener("error",e);const t=Si(Fi,this,zi).bind(this);Ii(Di,this).addEventListener("load",t),"html"===Ii(Pi,this).creative.nonLinearType?Ii(Di,this).srcdoc=Ii(Pi,this).creative.mediaUrl:Ii(Di,this).src=Ii(Pi,this).creative.mediaUrl,Ii(Bi,this).appendChild(Ii(Di,this)),Ii(Oi,this).appendChild(Ii(Bi,this)),Ii(_i,this).appendChild(Ii(Oi,this)),Si(Fi,this,Qi).call(this),o.show(Ii(_i,this)),Ii(Pi,this).rmpVastContentPlayer.play(Ii(Mi,this)),Vi(Mi,this,!1)}parse(e){u.print(Ii(Pi,this).debugRawConsoleLogs,"non-linear creatives follow",e);let t,i=!1;for(let s=0;s<e.length;s++){i=!1,t=e[s];let n=t.width,r=t.height;if(n<=0&&(n=300),r<=0&&(r=44),n>o.getWidth(Ii(Ui,this))||r>o.getHeight(Ii(Ui,this))){i=!0;continue}Vi(Ni,this,t.minSuggestedDuration);const a=t.staticResource,l=t.iframeResource,d=t.htmlResource;if(null!==a||null!==l||null!==d){a?(Ii(Pi,this).creative.mediaUrl=a,Ii(Pi,this).creative.nonLinearType="image"):l?(Ii(Pi,this).creative.mediaUrl=l,Ii(Pi,this).creative.nonLinearType="iframe"):d&&(Ii(Pi,this).creative.mediaUrl=d,Ii(Pi,this).creative.nonLinearType="html"),Ii(Pi,this).creative.width=n,Ii(Pi,this).creative.height=r,Ii(Pi,this).creative.type=t.type,u.print(Ii(Pi,this).debugRawConsoleLogs,"selected non-linear creative",Ii(Pi,this).creative);break}}if(!Ii(Pi,this).creative.mediaUrl||i){let e=503;return i&&(e=501),void Ii(Pi,this).rmpVastUtils.processVastErrors(e,!0)}Ii(Pi,this).creative.clickThroughUrl=t.nonlinearClickThroughURLTemplate,t.nonlinearClickTrackingURLTemplates.length>0&&t.nonlinearClickTrackingURLTemplates.forEach((e=>{e.url&&Ii(Pi,this).trackingTags.push({event:"clickthrough",url:e.url})})),Ii(Pi,this).rmpVastAdPlayer&&Ii(Pi,this).rmpVastAdPlayer.append()}}function ji(){Ii(Pi,this).rmpVastUtils.processVastErrors(502,!0)}function zi(){u.print(Ii(Pi,this).debugRawConsoleLogs,`success loading non-linear creative at ${Ii(Pi,this).creative.mediaUrl}`),Ii(Pi,this).__adOnStage=!0,Ii(Pi,this).rmpVastTracking.dispatchTrackingAndApiEvent(["adloaded","adimpression","adstarted","adcreativeview"])}function Hi(e){try{e&&e.stopPropagation(),Ii(Pi,this).pause(),Ii(Pi,this).rmpVastTracking.dispatchTrackingAndApiEvent("adclick")}catch(e){console.warn(e)}}function Yi(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),o.setStyle(Ii(Oi,this),{display:"none"}),Ii(Pi,this).rmpVastTracking.dispatchTrackingAndApiEvent("adclosed")}function Qi(){Vi(xi,this,document.createElement("div")),Ii(xi,this).className="rmp-ad-non-linear-close",o.makeButtonAccessible(Ii(xi,this),Ii(Li,this).labels.closeAd),Ii(Ni,this)>0?(o.setStyle(Ii(xi,this),{display:"none"}),window.clearTimeout(Ii(Wi,this)),Vi(Wi,this,window.setTimeout((()=>{o.setStyle(Ii(xi,this),{display:"block"})}),1e3*Ii(Ni,this)))):o.setStyle(Ii(xi,this),{display:"block"});const e=Si(Fi,this,Yi).bind(this);o.addEvents(["touchend","click"],Ii(xi,this),e),Ii(Oi,this).appendChild(Ii(xi,this))}function Gi(e,t,i){Ji(e,t),t.set(e,i)}function Ji(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zi(e,t){return e.get(Xi(e,t))}function Ki(e,t,i){return e.set(Xi(e,t),i),i}function Xi(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var $i=new WeakMap,es=new WeakMap,ts=new WeakMap,is=new WeakMap,ss=new WeakSet;class ns{constructor(e){!function(e,t){Ji(e,t),t.add(e)}(this,ss),Gi(this,$i,void 0),Gi(this,es,""),Gi(this,ts,[]),Gi(this,is,[]),Ki($i,this,e)}get requiredAttribute(){return Zi(es,this)}reset(){Ki(es,this,""),Ki(ts,this,[]),Ki(is,this,[])}parse(e){Ki(ts,this,[]),Ki(es,this,""),e.required&&Ki(es,this,e.required);const t=e.variations;if(t.length>0)for(let e=0;e<t.length;e++){const i=t[e],s={width:i.width,height:i.height},n=i.staticResources.find((e=>!!e.url)),r=i.iframeResources.find((e=>!!e)),a=i.htmlResources.find((e=>!!e));n&&n.url&&(s.imageUrl=n.url),r&&r.length>0&&(s.iframeUrl=r),a&&a.length>0&&(s.htmlContent=a),void 0===n&&void 0===r&&void 0===a||(i.companionClickThroughURLTemplate&&(s.companionClickThroughUrl=i.companionClickThroughURLTemplate),i.companionClickTrackingURLTemplates.length>0&&(s.companionClickTrackingUrls=i.companionClickTrackingURLTemplates),i.altText&&(s.altText=i.altText),i.adSlotId&&(s.adSlotId=i.adSlotId),s.trackingEventsUrls=[],i.trackingEvents&&i.trackingEvents.creativeView&&i.trackingEvents.creativeView.forEach((e=>{s.trackingEventsUrls.push(e)})),Zi(ts,this).push(s))}u.print(Zi($i,this).debugRawConsoleLogs,"Parse companion ads follow",Zi(ts,this))}getList(e,t){if(Zi(ts,this).length>0){let i;if(i="number"==typeof e&&e>0&&"number"==typeof t&&t>0?Zi(ts,this).filter((i=>e>=i.width&&t>=i.height)):Zi(ts,this),i.length>0)return Ki(is,this,i),Zi(is,this)}return[]}getItem(e){if(void 0===Zi(is,this)[e])return null;const t=Zi(is,this)[e];let i;if(t.imageUrl||t.iframeUrl?(t.imageUrl?(i=document.createElement("img"),t.altText&&(i.alt=t.altText)):(i=document.createElement("iframe"),i.sandbox="allow-scripts allow-same-origin"),i.width=t.width,i.height=t.height,i.style.cursor="pointer"):t.htmlContent&&(i=t.htmlContent),t.imageUrl||t.iframeUrl){const e=t.trackingEventsUrls;e.length>0&&(i.onload=()=>{e.forEach((e=>{Zi($i,this).rmpVastTracking.pingURI(e)}))},i.onerror=()=>{Zi($i,this).rmpVastTracking.error(603)});let s=null;if(t.companionClickTrackingUrls&&(u.print(Zi($i,this).debugRawConsoleLogs,"Companion click tracking URIs",s),s=t.companionClickTrackingUrls),t.companionClickThroughUrl){const e=Xi(ss,this,rs).bind(this,t.companionClickThroughUrl,s);o.addEvents(["touchend","click"],i,e)}}if(t.imageUrl)i.src=t.imageUrl;else if(t.iframeUrl)i.src=t.iframeUrl;else if(t.htmlContent)try{i=(new DOMParser).parseFromString(t.htmlContent,"text/html"),i=i.documentElement}catch(e){return console.warn(e),null}return i}}function rs(e,t,i){i&&(i.stopPropagation(),"touchend"===i.type&&i.preventDefault()),t&&t.forEach((e=>{e.url&&Zi($i,this).rmpVastTracking.pingURI(e.url)})),o.openWindow(e)}function as(e,t,i){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,i)}function os(e,t){return e.get(ds(e,t))}function ls(e,t,i){return e.set(ds(e,t),i),i}function ds(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var hs=new WeakMap,cs=new WeakMap,ps=new WeakMap,us=new WeakMap,ms=new WeakMap,gs=new WeakMap;class As{constructor(e){as(this,hs,void 0),as(this,cs,void 0),as(this,ps,void 0),as(this,us,void 0),as(this,ms,void 0),as(this,gs,null),ls(hs,this,e),ls(cs,this,e.params),ls(ps,this,e.currentContentPlayer),ls(us,this,e.adContainer),ls(ms,this,e.contentWrapper)}set volume(e){os(gs,this)&&(os(gs,this).volume=e)}get volume(){return os(gs,this)?os(gs,this).volume:-1}set muted(e){os(gs,this)&&(e&&!os(gs,this).muted?os(gs,this).muted=!0:!e&&os(gs,this).muted&&(os(gs,this).muted=!1))}get muted(){return!!os(gs,this)&&os(gs,this).muted}get duration(){return os(gs,this)&&o.isNumber(os(gs,this).duration)?1e3*os(gs,this).duration:-1}get currentTime(){return os(gs,this)&&o.isNumber(os(gs,this).currentTime)?1e3*os(gs,this).currentTime:-1}destroy(){u.print(os(hs,this).debugRawConsoleLogs,"start destroying ad player"),os(hs,this).rmpVastIcons&&os(hs,this).rmpVastIcons.destroy(),os(hs,this).rmpVastVpaidPlayer&&os(hs,this).rmpVastVpaidPlayer.destroy(),os(hs,this).rmpVastNonLinearCreative&&os(hs,this).rmpVastNonLinearCreative.destroy(),os(hs,this).rmpVastLinearCreative&&os(hs,this).rmpVastLinearCreative.destroy(),os(hs,this).rmpVastTracking.destroy(),o.hide(os(us,this)),os(hs,this).rmpVastContentPlayer&&os(hs,this).rmpVastContentPlayer.destroy();try{os(gs,this)&&(os(gs,this).pause(),os(hs,this).rmpVastLinearCreative&&os(hs,this).rmpVastLinearCreative.readingHlsJS?(os(hs,this).rmpVastLinearCreative.readingHlsJS=!1,os(hs,this).rmpVastLinearCreative.hlsJSInstances[os(hs,this).rmpVastLinearCreative.hlsJSIndex].destroy(),os(hs,this).rmpVastLinearCreative.hlsJSIndex=os(hs,this).rmpVastLinearCreative.hlsJSIndex++):(os(gs,this).removeAttribute("src"),os(gs,this).load()),o.hide(os(gs,this)),u.print(os(hs,this).debugRawConsoleLogs,"flushing currentAdPlayer buffer after ad")),os(hs,this).rmpVastNonLinearCreative&&os(hs,this).rmpVastNonLinearCreative.destroy()}catch(e){console.warn(e)}os(hs,this).resetVariablesForNewLoadAds(),os(hs,this).rmpVastUtils.createApiEvent("addestroyed")}init(){os(hs,this).adContainer=ls(us,this,document.createElement("div")),os(us,this).className="rmp-ad-container",os(ms,this).appendChild(os(us,this)),o.hide(os(us,this)),os(hs,this).currentAdPlayer=ls(gs,this,document.createElement("video")),u.printVideoEvents(os(hs,this).debugRawConsoleLogs,os(gs,this),"ad"),os(gs,this).className="rmp-ad-vast-video-player",os(cs,this).showControlsForAdPlayer?os(gs,this).controls=!0:os(gs,this).controls=!1,os(ps,this).hasAttribute("muted")&&(os(ps,this).muted=!0),os(ps,this).muted&&(os(gs,this).muted=!0),os(gs,this).poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",os(gs,this).setAttribute("x-webkit-airplay","allow"),"boolean"==typeof os(ps,this).playsInline&&os(ps,this).playsInline&&(os(gs,this).playsInline=!0),o.hide(os(gs,this)),os(us,this).appendChild(os(gs,this)),os(ps,this).addEventListener("ended",(()=>{os(hs,this).__adOnStage||(os(hs,this).contentCompleted=!0)})),os(gs,this).preload="auto",d.isMobile&&(os(ps,this).load(),os(gs,this).load()),os(hs,this).rmpVastInitialized=!0}append(e,t){if(!os(gs,this)){let e=null;if(os(us,this)&&(e=os(us,this).querySelector(".rmp-ad-vast-video-player")),null===e)return void os(hs,this).rmpVastUtils.processVastErrors(900,!0);ls(gs,this,e)}if(os(hs,this).rmpVastContentPlayer.pause(),os(hs,this).creative.isLinear)e&&t&&os(hs,this).rmpVastLinearCreative&&os(hs,this).rmpVastLinearCreative.update(e,t);else{if(os(cs,this).outstream)return u.print(os(hs,this).debugRawConsoleLogs,"non-linear creative detected for outstream ad mode - discarding creative"),void os(hs,this).rmpVastUtils.processVastErrors(201,!0);os(hs,this).rmpVastNonLinearCreative&&os(hs,this).rmpVastNonLinearCreative.update()}os(hs,this).rmpVastTracking.wire(),os(hs,this).rmpVastIcons&&os(hs,this).rmpVastIcons.iconsData.length>0&&os(hs,this).rmpVastIcons.append()}play(e){os(gs,this)&&os(gs,this).paused&&os(hs,this).rmpVastUtils.playPromise("vast",e)}pause(){os(gs,this)&&!os(gs,this).paused&&os(gs,this).pause()}resumeContent(){u.print(os(hs,this).debugRawConsoleLogs,"AdPlayer resumeContent requested"),os(hs,this).rmpVastAdPlayer&&os(hs,this).rmpVastAdPlayer.destroy(),os(hs,this).rmpVastLinearCreative&&(os(hs,this).rmpVastLinearCreative.readingHlsJS=!1),os(hs,this).contentCompleted||os(cs,this).outstream||(u.print(os(hs,this).debugRawConsoleLogs,"content player play requested after ad player resumeContent"),os(hs,this).rmpVastContentPlayer.play()),os(hs,this).contentCompleted=!1}}function vs(e,t,i){fs(e,t),t.set(e,i)}function fs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Es(e,t){return e.get(ws(e,t))}function ys(e,t,i){return e.set(ws(e,t),i),i}function ws(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var Cs=new WeakMap,Ts=new WeakMap,bs=new WeakMap,ks=new WeakMap,Rs=new WeakMap,Is=new WeakMap,Vs=new WeakMap,Ss=new WeakMap,Ps=new WeakMap,Ls=new WeakMap,_s=new WeakMap,Us=new WeakMap,Ns=new WeakMap,Ms=new WeakSet;class xs{constructor(e,t){!function(e,t){fs(e,t),t.add(e)}(this,Ms),vs(this,Cs,void 0),vs(this,Ts,void 0),vs(this,bs,void 0),vs(this,ks,void 0),vs(this,Rs,void 0),vs(this,Is,void 0),vs(this,Vs,void 0),vs(this,Ss,null),vs(this,Ps,null),vs(this,Ls,null),vs(this,_s,null),vs(this,Us,-1),vs(this,Ns,null),ys(Cs,this,t),ys(Ts,this,t.currentContentPlayer),ys(bs,this,t.currentAdPlayer),ys(ks,this,t.params),ys(Rs,this,t.isSkippableAd),ys(Is,this,t.skipTimeOffset),ys(Vs,this,e)}init(){["error","loadeddata","pause","play","timeupdate","volumechange","click"].forEach((e=>{Es(bs,this).addEventListener(e,(e=>ws(Ms,this,Fs).call(this,e)))})),ys(Ns,this,ws(Ms,this,Ds).bind(this)),document.addEventListener("fullscreenchange",Es(Ns,this)),ws(Ms,this,qs).call(this)}}function Bs(){document.removeEventListener("fullscreenchange",Es(Ns,this)),Es(_s,this).finish()}function Ds(){const e=null!==document.fullscreenElement?"fullscreen":"normal";Es(Ls,this).playerStateChange(e)}function Os(e,t){void 0!==e.trackingEvents&&Array.isArray(e.trackingEvents.verificationNotExecuted)&&e.trackingEvents.verificationNotExecuted.length>0&&e.trackingEvents.verificationNotExecuted.forEach((e=>{let i=e;const s=/\[REASON\]/gi;s.test(i)&&(i=i.replace(s,t)),Es(Cs,this).rmpVastTracking.pingURI(i)}))}function Ws(){if(!Es(Ps,this)||!Es(Ls,this)||!Es(bs,this)||0===Es(bs,this).playbackRate)return;const e=Es(bs,this).currentTime,t=Es(bs,this).duration;if(e>-1&&t>0){const i=e/t;Es(Us,this)<0&&i>=0?(Es(Ps,this).impressionOccurred(),Es(Ls,this).start(t,Es(bs,this).volume)):Es(Us,this)<.25&&i>=.25?Es(Ls,this).firstQuartile():Es(Us,this)<.5&&i>=.5?Es(Ls,this).midpoint():Es(Us,this)<.75&&i>=.75?Es(Ls,this).thirdQuartile():Es(Us,this)<1&&i>=1&&(Es(Ls,this).complete(),ys(Ps,this,null),ys(Ls,this,null),window.setTimeout((()=>{ws(Ms,this,Bs).call(this)}),300)),ys(Us,this,i)}}function Fs(e){if(!(Es(_s,this)&&Es(Ps,this)&&Es(Ls,this)&&Es(Ss,this)))return;let t,i,s="preroll";switch(e.type){case"error":Es(_s,this).error("video",Es(bs,this).error.message);break;case"loadeddata":if(Es(Is,this)<0&&ys(Is,this,0),Es(ks,this).outstream)s="standalone";else{const e=Es(Ts,this).currentTime,t=Es(Ts,this).duration;e>0&&e<t||e>=t&&(s="postroll")}t=new(Es(Ss,this))(Es(Rs,this),Es(Is,this),Es(ks,this).omidAutoplay,s),Es(Ps,this).loaded(t);break;case"pause":Es(Ls,this).pause();break;case"play":Es(bs,this).currentTime>0&&Es(Ls,this).resume();break;case"timeupdate":ws(Ms,this,Ws).call(this);break;case"volumechange":i=Es(bs,this).muted?0:Es(bs,this).volume,Es(Ls,this).volumeChange(i);break;case"click":Es(Ls,this).adUserInteraction("click")}}function qs(){const e=[];let t,i=[];for(let t=0;t<Es(Vs,this).length;t++){const s=Es(Vs,this)[t];"string"==typeof s.resource&&""!==s.resource&&(void 0!==s.type&&"executable"===s.type||void 0!==s.apiFramework&&"omid"!==s.apiFramework?ws(Ms,this,Os).call(this,s,"2"):Es(ks,this).omidAllowedVendors.length>0&&void 0!==s.vendor&&!Es(ks,this).omidAllowedVendors.includes(s.vendor)||(void 0===s.browserOptional||!0!==s.browserOptional?e.push(s):i.push(t)))}0===e.length&&i.length>0&&i.forEach((t=>{e.push(Es(Vs,this)[t])})),ys(Vs,this,e);try{t=OmidSessionClient.default}catch(e){return void console.warn(e)}const s=t.AdSession,n=t.Partner,r=t.Context,a=t.VerificationScriptResource,o=t.AdEvents,l=t.MediaEvents;ys(Ss,this,t.VastProperties);const d=new n(Es(ks,this).partnerName,Es(ks,this).partnerVersion);let h=[];if(Es(ks,this).omidRunValidationScript){const e="https://cdn.radiantmediatechs.com/rmp/omsdk/1.5.5/omid-validation-verification-script-v1.js",t="dummyVendor",i=JSON.stringify({k:"v"});h.push(new a(e,t,i))}else{const e="full";h=Es(Vs,this).map((t=>new a(t.resource,t.vendor,t.parameters,e)))}const c=new r(d,h,document.location.href);u.print(Es(Cs,this).debugRawConsoleLogs,"",h),c.underEvaluation=!0;const p=window.top;p?(c.setServiceWindow(p),c.setVideoElement(Es(bs,this)),u.print(Es(Cs,this).debugRawConsoleLogs,"",c),ys(_s,this,new s(c)),Es(_s,this).setCreativeType("video"),Es(_s,this).setImpressionType("beginToRender"),Es(_s,this).isSupported()?(ys(Ps,this,new o(Es(_s,this))),ys(Ls,this,new l(Es(_s,this))),Es(_s,this).start()):u.print(Es(Cs,this).debugRawConsoleLogs,"OMSDK: invalid serviceWindow - return")):u.print(Es(Cs,this).debugRawConsoleLogs,"OMSDK: invalid serviceWindow - return")}class js{constructor(e){this.eventName=e,this.callbacks=[]}registerCallback(e){this.callbacks.push(e)}unregisterCallback(e){const t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)}fire(e){this.callbacks.slice(0).forEach((t=>{t(e)}))}}function zs(e,t,i){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,i)}function Hs(e,t){return e.get(Qs(e,t))}function Ys(e,t,i){return e.set(Qs(e,t),i),i}function Qs(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var Gs=new WeakMap,Js=new WeakMap,Zs=new WeakMap,Ks=new WeakMap;class Xs{constructor(e){zs(this,Gs,void 0),zs(this,Js,void 0),zs(this,Zs,0),zs(this,Ks,null),Ys(Gs,this,e),Ys(Js,this,e.currentContentPlayer)}set volume(e){Hs(Js,this)&&(Hs(Js,this).volume=e)}get volume(){return Hs(Js,this)?Hs(Js,this).volume:-1}get muted(){return!!Hs(Js,this)&&Hs(Js,this).muted}set muted(e){Hs(Js,this)&&(e&&!Hs(Js,this).muted?Hs(Js,this).muted=!0:!e&&Hs(Js,this).muted&&(Hs(Js,this).muted=!1))}get currentTime(){return Hs(Js,this)&&o.isNumber(Hs(Js,this).currentTime)?1e3*Hs(Js,this).currentTime:-1}destroy(){window.clearInterval(Hs(Ks,this))}play(e){Hs(Js,this)&&Hs(Js,this).paused&&Hs(Gs,this).rmpVastUtils.playPromise("content",e)}pause(){Hs(Js,this)&&!Hs(Js,this).paused&&Hs(Js,this).pause()}seekTo(e){o.isNumber(e)&&e>=0&&Hs(Js,this)&&(Hs(Js,this).currentTime=e/1e3)}preventSeekingForCustomPlayback(){Hs(Js,this)&&Ys(Ks,this,window.setInterval((()=>{Hs(Gs,this).creative.isLinear&&Hs(Gs,this).__adOnStage&&(Math.abs(Hs(Zs,this)-Hs(Js,this).currentTime)>1&&(Hs(Js,this).currentTime=Hs(Zs,this)),Ys(Zs,this,Hs(Js,this).currentTime))}),200))}}function $s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}const en=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=[],n=rn(e);!t.ERRORCODE||i.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=hn(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING;for(const e in t)t[e]=dn(t[e]);for(const e in n){const i=n[e];"string"==typeof i&&s.push(sn(i,t))}return s}function sn(e,t){const i=(e=nn(e,t)).match(/[^[\]]+(?=])/g);if(!i)return e;let s=i.filter((e=>en.indexOf(e)>-1));return 0===s.length?e:(s=s.reduce(((e,t)=>(e[t]=-1,e)),{}),nn(e,s))}function nn(e,t){let i=e;for(const e in t){const s=t[e];i=i.replace(new RegExp("(?:\\[|%%)(".concat(e,")(?:\\]|%%)"),"g"),s)}return i}function rn(e){return Array.isArray(e)?e.map((e=>e&&e.hasOwnProperty("url")?e.url:e)):e}function an(e){return/^(https?:\/\/|\/\/)/.test(e)}function on(e,t){for(let i=0;i<t.length;i++)if(ln(t[i],e))return!0;return!1}function ln(e,t){if(e&&t){const i=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(t);return i.length===s.length&&e.id===t.id&&e.url===t.url}return!1}function dn(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%".concat(e.charCodeAt(0).toString(16))))}function hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}const cn={track:function(e,t,i){tn(e,t,i).forEach((e=>{"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:tn,extractURLsFromTemplates:rn,filterUrlTemplates:function(e){return e.reduce(((e,t)=>{const i=t.url||t;return an(i)?e.validUrls.push(i):e.invalidUrls.push(i),e}),{validUrls:[],invalidUrls:[]})},containsTemplateObject:on,isTemplateObjectEqual:ln,encodeURIComponentRFC3986:dn,replaceUrlMacros:sn,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce(((t,i)=>t.concat(Array.isArray(i)?e(i):i)),[])},joinArrayOfUniqueTemplateObjs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=Array.isArray(e)?e:[],s=Array.isArray(t)?t:[];return i.concat(s).reduce(((e,t)=>(on(t,e)||e.push(t),e)),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:hn,isValidUrl:an,isBrowserEnvironment:function(){return"undefined"!=typeof window},formatMacrosValues:function(e){return"object"!=typeof e?e:JSON.stringify(e)}};function pn(e){return["true","TRUE","True","1"].includes(e)}const un={childByName:function(e,t){return Array.from(e.childNodes).find((e=>e.nodeName===t))},childrenByName:function(e,t){return Array.from(e.childNodes).filter((e=>e.nodeName===t))},resolveVastAdTagURI:function(e,t){if(!t)return e;if(e.startsWith("//")){const{protocol:t}=location;return"".concat(t).concat(e)}if(!e.includes("://")){const i=t.slice(0,t.lastIndexOf("/"));return"".concat(i,"/").concat(e)}return e},parseBoolean:pn,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){const s=t.getAttribute(e);s&&i.setAttribute(e,s)},parseAttributes:function(e){return Array.from(e.attributes).reduce(((e,t)=>(e[t.nodeName]=t.nodeValue,e)),{})},parseDuration:function(e){if(null==e)return-1;if(cn.isNumeric(e))return parseInt(e);const t=e.split(":");if(3!==t.length)return-1;const i=t[2].split(".");let s=parseInt(i[0]);2===i.length&&(s+=parseFloat("0.".concat(i[1])));const n=parseInt(60*t[1]),r=parseInt(60*t[0]*60);return isNaN(r)||isNaN(n)||isNaN(s)||n>3600||s>60?-1:r+n+s},getStandAloneAds:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>!parseInt(e.sequence,10)))},getSortedAdPods:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>parseInt(e.sequence,10))).sort(((e,t)=>e.sequence-t.sequence))},assignAttributes:function(e,t){e&&Array.from(e).forEach((e=>{let{nodeName:i,nodeValue:s}=e;if(i&&s&&t.hasOwnProperty(i)){let e=s;"boolean"==typeof t[i]&&(e=pn(e)),t[i]=e}}))},mergeWrapperAdData:function(e,t){var i;e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[...e.viewableImpression,...t.viewableImpression]),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;const s=(t.creatives||[]).filter((e=>e&&"companion"===e.type)),n=s.reduce(((e,t)=>((t.variations||[]).forEach((t=>{(t.companionClickTrackingURLTemplates||[]).forEach((t=>{cn.containsTemplateObject(t,e)||e.push(t)}))})),e)),[]);e.creatives=s.concat(e.creatives);const r=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;if(e.creatives.forEach((e=>{if(t.trackingEvents&&t.trackingEvents[e.type])for(const i in t.trackingEvents[e.type]){const s=t.trackingEvents[e.type][i];Array.isArray(e.trackingEvents[i])||(e.trackingEvents[i]=[]),e.trackingEvents[i]=e.trackingEvents[i].concat(s)}"linear"===e.type&&(r&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&n.length&&(e.variations||[]).forEach((e=>{e.companionClickTrackingURLTemplates=cn.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,n)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories)),null!==(i=t.creatives)&&void 0!==i&&i.length){const i=t.creatives.filter((e=>{var t;return(null===(t=e.icons)||void 0===t?void 0:t.length)&&!e.mediaFiles.length}));i.length&&(e.creatives=e.creatives.concat(i))}}};function mn(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,adId:i,sequence:s,apiFramework:n}=$s(e);return{id:t,adId:i,sequence:s,apiFramework:n,type:"companion",required:null,variations:[]}}(t);return i.required=e.getAttribute("required")||null,i.variations=un.childrenByName(e,"Companion").map((e=>{const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotId:e.adSlotId||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(un.parseAttributes(e));t.htmlResources=un.childrenByName(e,"HTMLResource").reduce(((e,t)=>{const i=un.parseNodeText(t);return i?e.concat(i):e}),[]),t.iframeResources=un.childrenByName(e,"IFrameResource").reduce(((e,t)=>{const i=un.parseNodeText(t);return i?e.concat(i):e}),[]),t.staticResources=un.childrenByName(e,"StaticResource").reduce(((e,t)=>{const i=un.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=un.parseNodeText(un.childByName(e,"AltText"))||null;const i=un.childByName(e,"TrackingEvents");i&&un.childrenByName(i,"Tracking").forEach((e=>{const i=e.getAttribute("event"),s=un.parseNodeText(e);i&&s&&(Array.isArray(t.trackingEvents[i])||(t.trackingEvents[i]=[]),t.trackingEvents[i].push(s))})),t.companionClickTrackingURLTemplates=un.childrenByName(e,"CompanionClickTracking").map((e=>({id:e.getAttribute("id")||null,url:un.parseNodeText(e)}))),t.companionClickThroughURLTemplate=un.parseNodeText(un.childByName(e,"CompanionClickThrough"))||null;const s=un.childByName(e,"AdParameters");return s&&(t.adParameters={value:un.parseNodeText(s),xmlEncoded:s.getAttribute("xmlEncoded")||null}),t})),i}function gn(e,t){let i;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,adId:i,sequence:s,apiFramework:n}=$s(e);return{id:t,adId:i,sequence:s,apiFramework:n,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);s.duration=un.parseDuration(un.parseNodeText(un.childByName(e,"Duration")));const n=e.getAttribute("skipoffset");if(null==n)s.skipDelay=null;else if("%"===n.charAt(n.length-1)&&-1!==s.duration){const e=parseInt(n,10);s.skipDelay=s.duration*(e/100)}else s.skipDelay=un.parseDuration(n);const r=un.childByName(e,"VideoClicks");if(r){const e=un.childByName(r,"ClickThrough");s.videoClickThroughURLTemplate=e?{id:e.getAttribute("id")||null,url:un.parseNodeText(e)}:null,un.childrenByName(r,"ClickTracking").forEach((e=>{s.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:un.parseNodeText(e)})})),un.childrenByName(r,"CustomClick").forEach((e=>{s.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:un.parseNodeText(e)})}))}const a=un.childByName(e,"AdParameters");a&&(s.adParameters={value:un.parseNodeText(a),xmlEncoded:a.getAttribute("xmlEncoded")||null}),un.childrenByName(e,"TrackingEvents").forEach((e=>{un.childrenByName(e,"Tracking").forEach((e=>{let t=e.getAttribute("event");const n=un.parseNodeText(e);if(t&&n){if("progress"===t){if(i=e.getAttribute("offset"),!i)return;t="%"===i.charAt(i.length-1)?"progress-".concat(i):"progress-".concat(un.parseDuration(i))}Array.isArray(s.trackingEvents[t])||(s.trackingEvents[t]=[]),s.trackingEvents[t].push(n)}}))})),un.childrenByName(e,"MediaFiles").forEach((e=>{un.childrenByName(e,"MediaFile").forEach((e=>{s.mediaFiles.push(function(e){const t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=un.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);const i=e.getAttribute("scalable");i&&"string"==typeof i&&(t.scalable=un.parseBoolean(i));const s=e.getAttribute("maintainAspectRatio");return s&&"string"==typeof s&&(t.maintainAspectRatio=un.parseBoolean(s)),t}(e))}));const t=un.childByName(e,"InteractiveCreativeFile");t&&(s.interactiveCreativeFile=function(e){const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:un.parseBoolean(e.variableDuration),fileURL:null}}(un.parseAttributes(e));return t.fileURL=un.parseNodeText(e),t}(t));const i=un.childByName(e,"ClosedCaptionFiles");i&&un.childrenByName(i,"ClosedCaptionFile").forEach((e=>{const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(un.parseAttributes(e));t.fileURL=un.parseNodeText(e),s.closedCaptionFiles.push(t)}));const n=un.childByName(e,"Mezzanine"),r=function(e){const t={};let i=!1;return["delivery","type","width","height"].forEach((s=>{e&&e.getAttribute(s)?t[s]=e.getAttribute(s):i=!0})),i?null:t}(n);if(r){const e={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};e.id=n.getAttribute("id"),e.fileURL=un.parseNodeText(n),e.delivery=r.delivery,e.codec=n.getAttribute("codec"),e.type=r.type,e.width=parseInt(r.width,10),e.height=parseInt(r.height,10),e.fileSize=parseInt(n.getAttribute("fileSize"),10),e.mediaType=n.getAttribute("mediaType")||"2D",s.mezzanine=e}}));const o=un.childByName(e,"Icons");return o&&un.childrenByName(o,"Icon").forEach((e=>{s.icons.push(function(e){const t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null,iconClickFallbackImages:[],altText:null,hoverText:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=un.parseDuration(e.getAttribute("offset")),t.duration=un.parseDuration(e.getAttribute("duration")),t.altText=e.getAttribute("altText"),t.hoverText=e.getAttribute("hoverText"),un.childrenByName(e,"HTMLResource").forEach((e=>{t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=un.parseNodeText(e)})),un.childrenByName(e,"IFrameResource").forEach((e=>{t.type=e.getAttribute("creativeType")||0,t.iframeResource=un.parseNodeText(e)})),un.childrenByName(e,"StaticResource").forEach((e=>{t.type=e.getAttribute("creativeType")||0,t.staticResource=un.parseNodeText(e)}));const i=un.childByName(e,"IconClicks");if(i){t.iconClickThroughURLTemplate=un.parseNodeText(un.childByName(i,"IconClickThrough")),un.childrenByName(i,"IconClickTracking").forEach((e=>{t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:un.parseNodeText(e)})}));const e=un.childByName(i,"IconClickFallbackImages");e&&un.childrenByName(e,"IconClickFallbackImage").forEach((e=>{t.iconClickFallbackImages.push({url:un.parseNodeText(e)||null,width:e.getAttribute("width")||null,height:e.getAttribute("height")||null})}))}return t.iconViewTrackingURLTemplate=un.parseNodeText(un.childByName(e,"IconViewTracking")),t}(e))})),s}function An(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,adId:i,sequence:s,apiFramework:n}=$s(e);return{id:t,adId:i,sequence:s,apiFramework:n,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return un.childrenByName(e,"TrackingEvents").forEach((e=>{let t,s;un.childrenByName(e,"Tracking").forEach((e=>{t=e.getAttribute("event"),s=un.parseNodeText(e),t&&s&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(s))}))})),un.childrenByName(e,"NonLinear").forEach((e=>{const t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=un.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=un.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=un.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),un.childrenByName(e,"HTMLResource").forEach((e=>{t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=un.parseNodeText(e)})),un.childrenByName(e,"IFrameResource").forEach((e=>{t.type=e.getAttribute("creativeType")||0,t.iframeResource=un.parseNodeText(e)})),un.childrenByName(e,"StaticResource").forEach((e=>{t.type=e.getAttribute("creativeType")||0,t.staticResource=un.parseNodeText(e)}));const s=un.childByName(e,"AdParameters");s&&(t.adParameters={value:un.parseNodeText(s),xmlEncoded:s.getAttribute("xmlEncoded")||null}),t.nonlinearClickThroughURLTemplate=un.parseNodeText(un.childByName(e,"NonLinearClickThrough")),un.childrenByName(e,"NonLinearClickTracking").forEach((e=>{t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:un.parseNodeText(e)})})),i.variations.push(t)})),i}function vn(e){const t=[];return e.forEach((e=>{const i=fn(e);i&&t.push(i)})),t}function fn(e){if("#comment"===e.nodeName)return null;const t={name:null,value:null,attributes:{},children:[]},i=e.attributes,s=e.childNodes;if(t.name=e.nodeName,e.attributes)for(const e in i)if(i.hasOwnProperty(e)){const s=i[e];s.nodeName&&s.nodeValue&&(t.attributes[s.nodeName]=s.nodeValue)}for(const e in s)if(s.hasOwnProperty(e)){const i=fn(s[e]);i&&t.children.push(i)}if(0===t.children.length||1===t.children.length&&["#cdata-section","#text"].indexOf(t.children[0].name)>=0){const i=un.parseNodeText(e);""!==i&&(t.value=i),t.children=[]}return null===(n=t).value&&0===Object.keys(n.attributes).length&&0===n.children.length?null:t;var n}function En(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}const yn={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function wn(e,t){let{name:i,parentName:s,attributes:n,subElements:r,oneOfResources:a}=e,o="Element '".concat(i,"'");o+=n?" missing required attribute(s) '".concat(n.join(", "),"' "):r?" missing required sub element(s) '".concat(r.join(", "),"' "):a?" must provide one of the following '".concat(a.join(", "),"' "):" is empty",t("VAST-warning",{message:o,parentElement:s,specVersion:4.1})}const Cn=function e(t,i,s){if(t&&t.nodeName)if("InLine"===t.nodeName&&(s=!0),function(e,t){if(!yn[e.nodeName]||!yn[e.nodeName].attributes)return;const i=yn[e.nodeName].attributes.filter((t=>!e.getAttribute(t)));i.length>0&&wn({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:i},t)}(t,i),function(e){return e.children&&0!==e.children.length}(t)){!function(e,t,i){const s=yn[e.nodeName],n=!i&&"Wrapper"!==e.nodeName;if(s&&!n){if(s.subElements){const i=s.subElements.filter((t=>!un.childByName(e,t)));i.length>0&&wn({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:i},t)}i&&s.oneOfinLineResources&&(s.oneOfinLineResources.some((t=>un.childByName(e,t)))||wn({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:s.oneOfinLineResources},t))}}(t,i,s);for(let n=0;n<t.children.length;n++)e(t.children[n],i,s)}else 0===un.parseNodeText(t).length&&wn({name:t.nodeName,parentName:t.parentNode.nodeName},i)};function Tn(e,t){let{allowMultipleAds:i,followAdditionalWrappers:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Array.from(e.childNodes).filter((e=>{const t=e.nodeName.toLowerCase();return"inline"===t||!1!==s&&"wrapper"===t}));for(const s of n){if(un.copyNodeAttribute("id",e,s),un.copyNodeAttribute("sequence",e,s),un.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:Rn(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:bn(s,t,{allowMultipleAds:i}),type:"INLINE"};const n=s.nodeName.toLowerCase();t("VAST-warning",{message:"<".concat(s.nodeName,"inline"===n?"> must be written <InLine>":"> must be written <Wrapper>"),wrongNode:s})}}function bn(e,t){let{allowMultipleAds:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1===i&&e.getAttribute("sequence")?null:kn(e,t)}function kn(e,t){let i=[];t&&Cn(e,t);const s=Array.from(e.childNodes),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(un.parseAttributes(e));return s.forEach((e=>{switch(e.nodeName){case"Error":n.errorURLTemplates.push(un.parseNodeText(e));break;case"Impression":n.impressionURLTemplates.push({id:e.getAttribute("id")||null,url:un.parseNodeText(e)});break;case"Creatives":n.creatives=function(e){const t=[];return e.forEach((e=>{const i={id:e.getAttribute("id")||null,adId:En(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},s=[];let n;un.childrenByName(e,"UniversalAdId").forEach((e=>{const t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:un.parseNodeText(e)};s.push(t)}));const r=un.childByName(e,"CreativeExtensions");r&&(n=vn(un.childrenByName(r,"CreativeExtension")));for(const r in e.childNodes){const a=e.childNodes[r];let o;switch(a.nodeName){case"Linear":o=gn(a,i);break;case"NonLinearAds":o=An(a,i);break;case"CompanionAds":o=mn(a,i)}o&&(s&&(o.universalAdIds=s),n&&(o.creativeExtensions=n),t.push(o))}})),t}(un.childrenByName(e,"Creative"));break;case"Extensions":{const t=un.childrenByName(e,"Extension");n.extensions=vn(t),n.adVerifications.length||(i=function(e){let t=null,i=[];return e.some((e=>t=un.childByName(e,"AdVerifications"))),t&&(i=In(un.childrenByName(t,"Verification"))),i}(t));break}case"AdVerifications":n.adVerifications=In(un.childrenByName(e,"Verification"));break;case"AdSystem":n.system={value:un.parseNodeText(e),version:e.getAttribute("version")||null};break;case"AdTitle":n.title=un.parseNodeText(e);break;case"AdServingId":n.adServingId=un.parseNodeText(e);break;case"Category":n.categories.push({authority:e.getAttribute("authority")||null,value:un.parseNodeText(e)});break;case"Expires":n.expires=parseInt(un.parseNodeText(e),10);break;case"ViewableImpression":n.viewableImpression.push(function(e){const t=(e,t)=>{const i=un.parseNodeText(t);return i&&e.push(i),e};return{id:e.getAttribute("id")||null,viewable:un.childrenByName(e,"Viewable").reduce(t,[]),notViewable:un.childrenByName(e,"NotViewable").reduce(t,[]),viewUndetermined:un.childrenByName(e,"ViewUndetermined").reduce(t,[])}}(e));break;case"Description":n.description=un.parseNodeText(e);break;case"Advertiser":n.advertiser={id:e.getAttribute("id")||null,value:un.parseNodeText(e)};break;case"Pricing":n.pricing={value:un.parseNodeText(e),model:e.getAttribute("model")||null,currency:e.getAttribute("currency")||null};break;case"Survey":n.survey={value:un.parseNodeText(e),type:e.getAttribute("type")||null};break;case"BlockedAdCategories":n.blockedAdCategories.push({authority:e.getAttribute("authority")||null,value:un.parseNodeText(e)})}})),i.length&&(n.adVerifications=n.adVerifications.concat(i)),n}function Rn(e,t){const i=kn(e,t),s=e.getAttribute("followAdditionalWrappers"),n=e.getAttribute("allowMultipleAds"),r=e.getAttribute("fallbackOnNoAd");i.followAdditionalWrappers=!s||un.parseBoolean(s),i.allowMultipleAds=!!n&&un.parseBoolean(n),i.fallbackOnNoAd=r?un.parseBoolean(r):null;let a=un.childByName(e,"VASTAdTagURI");if(a?i.nextWrapperURL=un.parseNodeText(a):(a=un.childByName(e,"VASTAdTagURL"),a&&(i.nextWrapperURL=un.parseNodeText(un.childByName(a,"URL")))),i.creatives.forEach((e=>{if(["linear","nonlinear"].includes(e.type)){if(e.trackingEvents){i.trackingEvents||(i.trackingEvents={}),i.trackingEvents[e.type]||(i.trackingEvents[e.type]={});for(const t in e.trackingEvents){const s=e.trackingEvents[t];Array.isArray(i.trackingEvents[e.type][t])||(i.trackingEvents[e.type][t]=[]),s.forEach((s=>{i.trackingEvents[e.type][t].push(s)}))}}e.videoClickTrackingURLTemplates&&(Array.isArray(i.videoClickTrackingURLTemplates)||(i.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((e=>{i.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(i.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(i.videoCustomClickURLTemplates)||(i.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((e=>{i.videoCustomClickURLTemplates.push(e)})))}})),i.nextWrapperURL)return i}function In(e){const t=[];return e.forEach((e=>{const i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},s=Array.from(e.childNodes);un.assignAttributes(e.attributes,i),s.forEach((e=>{let{nodeName:t,textContent:s,attributes:n}=e;switch(t){case"JavaScriptResource":case"ExecutableResource":i.resource=s.trim(),un.assignAttributes(n,i);break;case"VerificationParameters":i.parameters=s.trim()}}));const n=un.childByName(e,"TrackingEvents");n&&un.childrenByName(n,"Tracking").forEach((e=>{const t=e.getAttribute("event"),s=un.parseNodeText(e);t&&s&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(s))})),t.push(i)})),t}class Vn{constructor(){this._handlers=[]}on(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(typeof t));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(typeof e));return this._handlers.push({event:e,handler:t}),this}once(e,t){return this.on(e,function(e,t,i){const s={fired:!1,wrapFn:void 0};function n(){s.fired||(e.off(t,s.wrapFn),s.fired=!0,i.bind(e)(...arguments))}return s.wrapFn=n,n}(this,e,t))}off(e,t){return this._handlers=this._handlers.filter((i=>i.event!==e||i.handler!==t)),this}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];let n=!1;return this._handlers.forEach((t=>{"*"===t.event&&(n=!0,t.handler(e,...i)),t.event===e&&(n=!0,t.handler(...i))})),n}removeAllListeners(e){return e?(this._handlers=this._handlers.filter((t=>t.event!==e)),this):(this._handlers=[],this)}listenerCount(e){return this._handlers.filter((t=>t.event===e)).length}listeners(e){return this._handlers.reduce(((t,i)=>(i.event===e&&t.push(i.handler),t)),[])}eventNames(){return this._handlers.map((e=>e.event))}}let Sn=0,Pn=0;const Ln=(e,t)=>{!e||!t||e<=0||t<=0||(Pn=(Pn*Sn+8*e/t)/++Sn)},_n={ERRORCODE:900,extensions:[]},Un="VAST response version not supported";class Nn extends Vn{constructor(){let{fetcher:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.maxWrapperDepth=null,this.rootErrorURLTemplates=[],this.errorURLTemplates=[],this.remainingAds=[],this.parsingOptions={},this.fetcher=e||null}trackVastError(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];this.emit("VAST-error",Object.assign({},_n,t,...s)),cn.track(e,t)}getErrorURLTemplates(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}getEstimatedBitrate(){return Pn}initParsingStatus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.maxWrapperDepth=e.wrapperLimit||10,this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.rootURL="",this.resetParsingStatus(),Ln(e.byteLength,e.requestDuration)}resetParsingStatus(){this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.vastVersion=null}getRemainingAds(e){if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));const t=e?this.remainingAds:[this.remainingAds.shift()];return this.errorURLTemplates=[],this.resolveAds(t,{wrapperDepth:0,url:this.rootURL}).then((e=>this.buildVASTResponse(e)))}parseVAST(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(t),t.isRootVAST=!0,this.parse(e,t).then((e=>this.buildVASTResponse(e)))}buildVASTResponse(e){const t=function(e){let{ads:t,errorURLTemplates:i,version:s}=e;return{ads:t||[],errorURLTemplates:i||[],version:s||null}}({ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion});return this.completeWrapperResolving(t),t}parseVastXml(e,t){let{isRootVAST:i=!1,url:s=null,wrapperDepth:n=0,allowMultipleAds:r,followAdditionalWrappers:a}=t;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName){var o;this.emit("VAST-ad-parsed",{type:"ERROR",url:s,wrapperDepth:n});const t="VideoAdServingTemplate"===(null==e||null===(o=e.documentElement)||void 0===o?void 0:o.nodeName);throw new Error(t?Un:"Invalid VAST XMLDocument")}const l=[],d=e.documentElement.childNodes,h=e.documentElement.getAttribute("version");i&&h&&(this.vastVersion=h);for(const e in d){const t=d[e];if("Error"===t.nodeName){const e=un.parseNodeText(t);i?this.rootErrorURLTemplates.push(e):this.errorURLTemplates.push(e)}else if("Ad"===t.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)r=!0;else if(!1===r&&l.length>1)break;const e=Tn(t,this.emit.bind(this),{allowMultipleAds:r,followAdditionalWrappers:a});e.ad?(l.push(e.ad),this.emit("VAST-ad-parsed",{type:e.type,url:s,wrapperDepth:n,adIndex:l.length-1,vastVersion:h})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return l}parse(e){let{url:t=null,resolveAll:i=!0,wrapperSequence:s=null,previousUrl:n=null,wrapperDepth:r=0,isRootVAST:a=!1,followAdditionalWrappers:o,allowMultipleAds:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&a&&(l=!0);try{d=this.parseVastXml(e,{isRootVAST:a,url:t,wrapperDepth:r,allowMultipleAds:l,followAdditionalWrappers:o})}catch(e){return Promise.reject(e)}if(1===d.length&&null!=s&&(d[0].sequence=s),!1===i){const e=un.getSortedAdPods(d),t=un.getStandAloneAds(d);e.length?d=e:t.length&&(d=[t.shift()]),this.remainingAds=t}return this.resolveAds(d,{wrapperDepth:r,previousUrl:n,url:t})}resolveAds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{wrapperDepth:t,previousUrl:i,url:s}=arguments.length>1?arguments[1]:void 0;const n=[];return i=s,e.forEach((e=>{const s=this.resolveWrappers(e,t,i);n.push(s)})),Promise.all(n).then((e=>cn.flatten(e)))}resolveWrappers(e,t,i){const s={...e};return new Promise((e=>{var n;if(t++,!s.nextWrapperURL)return delete s.nextWrapperURL,e(s);if(!this.fetcher)return s.VASTAdTagURI=s.nextWrapperURL,delete s.nextWrapperURL,e(s);if(t>=this.maxWrapperDepth)return s.errorCode=302,delete s.nextWrapperURL,e(s);s.nextWrapperURL=un.resolveVastAdTagURI(s.nextWrapperURL,i);const r=null!==(n=this.parsingOptions.allowMultipleAds)&&void 0!==n?n:s.allowMultipleAds,a=s.sequence;this.fetcher.fetchVAST({url:s.nextWrapperURL,emitter:this.emit.bind(this),maxWrapperDepth:this.maxWrapperDepth}).then((n=>this.parse(n,{url:s.nextWrapperURL,previousUrl:i,wrapperSequence:a,wrapperDepth:t,followAdditionalWrappers:s.followAdditionalWrappers,allowMultipleAds:r}).then((t=>{if(delete s.nextWrapperURL,0===t.length)return s.creatives=[],e(s);t.forEach((e=>{e&&un.mergeWrapperAdData(e,s)})),e(t)})))).catch((t=>{s.errorCode=t.message===Un?102:301,s.errorMessage=t.message,e(s)}))}))}completeWrapperResolving(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(let t=e.ads.length-1;t>=0;t--){const i=e.ads[t],s=!i.creatives.some((e=>{var t,i;return(null===(t=e.mediaFiles)||void 0===t?void 0:t.length)>0||(null===(i=e.variations)||void 0===i?void 0:i.length)>0}));!i.errorCode&&!s||i.VASTAdTagURI||(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}let Mn=null;const xn={data:{},length:0,getItem(e){return this.data[e]},setItem(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem(e){delete this.data[e],this.length=Object.keys(this.data).length},clear(){this.data={},this.length=0}};class Bn{constructor(){this.storage=this.initStorage()}initStorage(){if(Mn)return Mn;try{Mn="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){Mn=null}return Mn&&!this.isStorageDisabled(Mn)||(Mn=xn,Mn.clear()),Mn}isStorageDisabled(e){const t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}getItem(e){return this.storage.getItem(e)}setItem(e,t){return this.storage.setItem(e,t)}removeItem(e){return this.storage.removeItem(e)}clear(){return this.storage.clear()}}const Dn=12e4,On={get:async function(e,t){try{const i=new AbortController,s=setTimeout((()=>{throw i.abort(),new Error("URLHandler: Request timed out after ".concat(t.timeout||Dn," ms (408)"))}),t.timeout||Dn),n=await fetch(e,{...t,signal:i.signal,credentials:t.withCredentials?"include":"omit"}).finally((()=>{clearTimeout(s)})),r=function(e){return cn.isBrowserEnvironment()&&"https:"===window.location.protocol&&e.url.includes("http://")?"URLHandler: Cannot go from HTTPS to HTTP.":200===e.status&&e.ok?null:"URLHandler: ".concat(e.statusText," (").concat(e.status,")")}(n);return r?{error:new Error(r),statusCode:n.status}:async function(e){const t=await e.text();let i;return i=cn.isBrowserEnvironment()?new DOMParser:new((await a.e(312).then(a.t.bind(a,312,19))).DOMParser),{xml:i.parseFromString(t,"text/xml"),details:{byteLength:t.length,statusCode:e.status,rawXml:t}}}(n)}catch(e){return{error:e,statusCode:"AbortError"===e.name?408:null}}}};class Wn{constructor(){this.URLTemplateFilters=[]}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlHandler=e.urlHandler||e.urlhandler||On,this.fetchingOptions={...e.fetchOptions,timeout:e.timeout||Dn,withCredentials:Boolean(e.withCredentials)}}addURLTemplateFilter(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}removeLastURLTemplateFilter(){this.URLTemplateFilters.pop()}countURLTemplateFilters(){return this.URLTemplateFilters.length}clearURLTemplateFilters(){this.URLTemplateFilters=[]}async fetchVAST(e){var t;let{url:i,maxWrapperDepth:s,emitter:n,wrapperDepth:r=0,previousUrl:a=null,wrapperAd:o=null}=e;const l=Date.now();this.URLTemplateFilters.forEach((e=>{i=e(i)})),n("VAST-resolving",{url:i,previousUrl:a,wrapperDepth:r,maxWrapperDepth:s,timeout:this.fetchingOptions.timeout,wrapperAd:o});const d=await this.urlHandler.get(i,this.fetchingOptions),h=Math.round(Date.now()-l);if(n("VAST-resolved",{url:i,previousUrl:a,wrapperDepth:r,error:(null==d?void 0:d.error)||null,duration:h,statusCode:(null==d?void 0:d.statusCode)||null,...null==d?void 0:d.details}),Ln(null==d||null===(t=d.details)||void 0===t?void 0:t.byteLength,h),d.error)throw new Error(d.error);return d.xml}}class Fn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Bn;this.cappingFreeLunch=e,this.cappingMinimumTimeInterval=t,this.fetcher=new Wn,this.vastParser=new Nn({fetcher:this.fetcher}),this.storage=i,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}addURLTemplateFilter(e){this.fetcher.addURLTemplateFilter(e)}removeLastURLTemplateFilter(){this.fetcher.removeLastURLTemplateFilter()}countURLTemplateFilters(){return this.fetcher.countURLTemplateFilters()}clearURLTemplateFilters(){this.fetcher.clearURLTemplateFilters()}getParser(){return this.vastParser}get lastSuccessfulAd(){return this.storage.getItem("vast-client-last-successful-ad")}set lastSuccessfulAd(e){this.storage.setItem("vast-client-last-successful-ad",e)}get totalCalls(){return this.storage.getItem("vast-client-total-calls")}set totalCalls(e){this.storage.setItem("vast-client-total-calls",e)}get totalCallsTimeout(){return this.storage.getItem("vast-client-total-calls-timeout")}set totalCallsTimeout(e){this.storage.setItem("vast-client-total-calls-timeout",e)}hasRemainingAds(){return this.vastParser.remainingAds.length>0}getNextAds(e){return this.vastParser.getRemainingAds(e)}parseVAST(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetcher.setOptions(t),this.vastParser.parseVAST(e,t)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Date.now();return t.hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise(((s,n)=>{if(this.cappingFreeLunch>=this.totalCalls)return n(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(this.totalCalls,"/").concat(this.cappingFreeLunch)));const r=i-this.lastSuccessfulAd;if(r<0)this.lastSuccessfulAd=0;else if(r<this.cappingMinimumTimeInterval)return n(new Error("VAST call canceled  (".concat(this.cappingMinimumTimeInterval,")ms minimum interval reached")));this.vastParser.initParsingStatus(t),this.fetcher.setOptions(t),this.vastParser.rootURL=e,this.fetcher.fetchVAST({url:e,emitter:this.vastParser.emit.bind(this.vastParser),maxWrapperDepth:this.vastParser.maxWrapperDepth}).then((i=>(t.previousUrl=e,t.isRootVAST=!0,t.url=e,this.vastParser.parse(i,t).then((e=>{const t=this.vastParser.buildVASTResponse(e);s(t)}))))).catch((e=>n(e)))}))}}var qn=a(72),jn=a.n(qn),zn=a(825),Hn=a.n(zn),Yn=a(659),Qn=a.n(Yn),Gn=a(56),Jn=a.n(Gn),Zn=a(540),Kn=a.n(Zn),Xn=a(113),$n=a.n(Xn),er=a(63),tr={};function ir(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}tr.styleTagTransform=$n(),tr.setAttributes=Jn(),tr.insert=Qn().bind(null,"head"),tr.domAPI=Hn(),tr.insertStyleElement=Kn(),jn()(er.A,tr),er.A&&er.A.locals&&er.A.locals;var sr=new WeakSet;class nr{constructor(e,t){if(function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,sr),ir(sr,this,rr).call(this),"string"==typeof e&&""!==e)this.container=document.getElementById(e);else{if(!(void 0!==e&&e instanceof HTMLElement))return void console.error("Invalid idOrElement to create new instance - exit");this.container=e}this.contentWrapper=this.container.querySelector(".rmp-content"),this.currentContentPlayer=this.container.querySelector(".rmp-video"),null!==this.container&&null!==this.contentWrapper&&null!==this.currentContentPlayer?(this.rmpVastUtils=new T(this),this.rmpVastUtils.filterParams(t),this.params.debugRawConsoleLogs&&(this.debugRawConsoleLogs=!0),u.print(this.debugRawConsoleLogs,"Filtered params follow",this.params),u.print(this.debugRawConsoleLogs,"Creating new RmpVast instance"),this.rmpVastContentPlayer=new Xs(this),this.rmpVastTracking=new j(this),this.rmpVastCompanionCreative=new ns(this),this.environmentData=d,u.printVideoEvents(this.debugRawConsoleLogs,this.currentContentPlayer,"content"),this.resetVariablesForNewLoadAds(),this.rmpVastUtils.handleFullscreen()):console.error("Invalid DOM layout - missing container or content wrapper or content player - exit")}resetVariablesForNewLoadAds(){this.attachViewableObserverFn&&this.off("adstarted",this.attachViewableObserverFn),this.rmpVastTracking.reset(),this.rmpVastCompanionCreative.reset(),this.trackingTags=[],this.vastErrorTags=[],this.adErrorTags=[],this.needsSeekAdjust=!1,this.seekAdjustAttached=!1,this.ad={},this.creative={},this.attachViewableObserverFn=null,this.viewableObserver=null,this.viewablePreviousRatio=.5,this.regulationsInfo={},this.requireCategory=!1,this.progressEvents=[],this.rmpVastLinearCreative=null,this.rmpVastNonLinearCreative=null,this.rmpVastVpaidPlayer=null,this.adParametersData="",this.rmpVastSimidPlayer=null,this.rmpVastIcons=null,this.__adTagUrl="",this.__vastErrorCode=-1,this.__adErrorType="",this.__adErrorMessage="",this.__adOnStage=!1}dispatch(e,t){const i=this.events[e];if(i){const s={type:e};t&&(s.data=t),i.fire(s)}}on(e,t){"string"==typeof e&&""!==e&&"function"==typeof t&&e.split(" ").forEach((e=>{ir(sr,this,ar).call(this,e,t)}))}one(e,t){"string"==typeof e&&""!==e&&"function"==typeof t&&e.split(" ").forEach((e=>{ir(sr,this,or).call(this,e,t)}))}off(e,t){"string"==typeof e&&""!==e&&"function"==typeof t&&e.split(" ").forEach((e=>{ir(sr,this,lr).call(this,e,t)}))}loadAds(e,t,i){if(u.print(this.debugRawConsoleLogs,"loadAds method starts"),this.rmpVastInitialized||this.initialize(),"object"==typeof t){const e=/coppa|gdpr/gi;t.regulations&&e.test(t.regulations)&&(this.regulationsInfo.regulations=t.regulations);const i=/0|1/gi;t.limitAdTracking&&i.test(t.limitAdTracking)&&(this.regulationsInfo.limitAdTracking=t.limitAdTracking),t.gdprConsent&&(this.regulationsInfo.gdprConsent=t.gdprConsent)}i&&(this.requireCategory=!0);let s=e;if(this.params.vastXmlInput||(s=this.rmpVastTracking.replaceMacros(e,!1)),this.__adOnStage)return u.print(this.debugRawConsoleLogs,"Creative already on stage calling stopAds before loading new ad"),this.one("addestroyed",this.loadAds.bind(this,s)),void this.stopAds();ir(sr,this,gr).call(this,s)}play(){this.__adOnStage&&this.creative&&this.creative.isLinear?this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.resumeAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.play():this.rmpVastContentPlayer.play()}pause(){this.__adOnStage&&this.creative&&this.creative.isLinear?this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.pauseAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.pause():this.rmpVastContentPlayer.pause()}stopAds(){this.__adOnStage&&(this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.stopAd():this.rmpVastSimidPlayer?this.rmpVastSimidPlayer.stopAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.resumeContent())}destroy(){this.rmpVastUtils.destroyFullscreen(),this.rmpVastAdPlayer&&this.rmpVastAdPlayer.destroy(),ir(sr,this,rr).call(this)}skipAd(){this.__adOnStage&&this.adSkippableState&&(this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.skipAd():this.rmpVastSimidPlayer?this.rmpVastSimidPlayer.skipAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.resumeContent())}get environment(){return this.environmentData}get adPaused(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdPaused();if(this.currentAdPlayer)return this.currentAdPlayer.paused}return!1}set volume(e){if(!o.isNumber(e))return;let t=0;t=e<0?0:e>1?1:e,this.__adOnStage&&this.creative&&this.creative.isLinear&&(this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.setAdVolume(t),this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.volume=t)),this.rmpVastContentPlayer.volume=t}get volume(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdVolume();if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.volume}return this.rmpVastContentPlayer.volume}set muted(e){"boolean"==typeof e&&(this.__adOnStage&&this.creative&&this.creative.isLinear&&(this.rmpVastVpaidPlayer?e?this.rmpVastVpaidPlayer.setAdVolume(0):this.rmpVastVpaidPlayer.setAdVolume(1):this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.muted=e)),this.rmpVastContentPlayer.muted=e)}get muted(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return 0===this.rmpVastVpaidPlayer.getAdVolume();if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.muted}return this.rmpVastContentPlayer.muted}get adTagUrl(){return this.__adTagUrl}get adMediaUrl(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getCreativeUrl();if(this.creative&&this.creative.mediaUrl)return this.creative.mediaUrl}return""}get adLinear(){return!(!this.creative||!this.creative.isLinear)}get adSystem(){return this.ad&&this.ad.system?{value:this.ad.system.value||"",version:this.ad.system.version||""}:{value:"",version:""}}get adUniversalAdIds(){return this.creative&&this.creative.universalAdIds?this.creative.universalAdIds:[]}get adContentType(){return this.creative&&this.creative.type?this.creative.type:""}get adTitle(){return this.ad&&this.ad.title?this.ad.title:""}get adDescription(){return this.ad&&this.ad.description?this.ad.description:""}get adAdvertiser(){return this.ad&&this.ad.advertiser&&null!==this.ad.advertiser?this.ad.advertiser:{id:"",value:""}}get adPricing(){return this.ad&&this.ad.pricing&&null!==this.ad.pricing?this.ad.pricing:{value:"",model:"",currency:""}}get adSurvey(){return this.ad&&this.ad.survey?this.ad.survey:{value:"",type:""}}get adAdServingId(){return this.ad&&this.ad.adServingId?this.ad.adServingId:""}get adCategories(){return this.ad&&this.ad.categories&&this.ad.categories.length>0?this.ad.categories:[]}get adBlockedAdCategories(){return this.ad&&this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length>0?this.ad.blockedAdCategories:[]}get adDuration(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){let e=this.rmpVastVpaidPlayer.getAdDuration();return e>0&&(e*=1e3),e}if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.duration}return-1}get adCurrentTime(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){const e=this.rmpVastVpaidPlayer.getAdRemainingTime(),t=this.rmpVastVpaidPlayer.getAdDuration();return-1===e||-1===t||e>t?-1:1e3*(t-e)}if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.currentTime}return-1}get adRemainingTime(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){let e=this.rmpVastVpaidPlayer.getAdRemainingTime();return e>0&&(e*=1e3),e}if(this.rmpVastAdPlayer){const e=this.rmpVastAdPlayer.currentTime,t=this.rmpVastAdPlayer.duration;return-1===e||-1===t||e>t?-1:t-e}}return-1}get adOnStage(){return this.__adOnStage}get adMediaWidth(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdWidth();if(this.creative&&this.creative.width)return this.creative.width}return-1}get adMediaHeight(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdHeight();if(this.creative&&this.creative.height)return this.creative.height}return-1}get clickThroughUrl(){return this.creative&&this.creative.clickThroughUrl?this.creative.clickThroughUrl:""}get skipTimeOffset(){return this.creative&&this.creative.skipoffset?this.creative.skipoffset:-1}get isSkippableAd(){return!(!this.creative||!this.creative.isSkippableAd)}get contentPlayerCompleted(){return this.contentCompleted}set contentPlayerCompleted(e){"boolean"==typeof e&&(this.contentCompleted=e)}get adErrorMessage(){return this.__adErrorMessage}get adVastErrorCode(){return this.__vastErrorCode}get adErrorType(){return this.__adErrorType}get adSkippableState(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdSkippableState();if(this.rmpVastSimidPlayer)return!0;if(this.isSkippableAd&&this.rmpVastLinearCreative)return this.rmpVastLinearCreative.skippableAdCanBeSkipped}return!1}get adPlayer(){return this.currentAdPlayer}get contentPlayer(){return this.currentContentPlayer}get initialized(){return this.rmpVastInitialized}get adPodInfo(){if(this.adPod&&this.adPodLength){const e={};return e.adPodCurrentIndex=this.adSequence,e.adPodLength=this.adPodLength,e}return{adPodCurrentIndex:-1,adPodLength:0}}get companionAdsRequiredAttribute(){return this.rmpVastCompanionCreative.requiredAttribute}getCompanionAdsList(e,t){return this.rmpVastCompanionCreative.getList(e,t)}getCompanionAd(e){return this.rmpVastCompanionCreative.getItem(e)}initialize(){this.rmpVastInitialized||(u.print(this.debugRawConsoleLogs,"Upon user interaction - player needs to be initialized"),this.rmpVastAdPlayer=new As(this),this.rmpVastAdPlayer.init())}resizeAd(e,t,i){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.resizeAd(e,t,i)}expandAd(){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.expandAd()}collapseAd(){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.collapseAd()}get adExpanded(){return this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.getAdExpanded(),!1}get vpaidCompanionAds(){return this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.getAdCompanions(),""}}function rr(){this.adContainer=null,this.contentWrapper=null,this.container=null,this.rmpVastContentPlayer=null,this.rmpVastAdPlayer=null,this.rmpVastUtils=null,this.rmpVastTracking=null,this.rmpVastCompanionCreative=null,this.environmentData=null,this.currentContentSrc="",this.currentContentCurrentTime=-1,this.params={},this.events={},this.isInFullscreen=!1,this.contentCompleted=!1,this.currentContentPlayer=null,this.currentAdPlayer=null,this.rmpVastInitialized=!1,this.debugRawConsoleLogs=!1,this.adPod=!1,this.adPodLength=0,this.adSequence=0}function ar(e,t){let i=this.events[e];i||(i=new js(e),this.events[e]=i),i.registerCallback(t)}function or(e,t){const i=s=>{this.off(e,i),t(s)};this.on(e,i)}function lr(e,t){const i=this.events[e];i&&i.callbacks.indexOf(t)>-1&&(i.unregisterCallback(t),0===i.callbacks.length&&delete this.events[e])}function dr(e){Object.keys(e).forEach((t=>{e[t].forEach((e=>{this.trackingTags.push({event:t,url:e})}))}))}function hr(e){e.forEach((e=>{e.intersectionRatio>this.viewablePreviousRatio&&(this.viewableObserver.unobserve(this.container),this.rmpVastTracking.dispatchTrackingAndApiEvent("adviewable")),this.viewablePreviousRatio=e.intersectionRatio}))}function cr(){if(this.off("adstarted",this.attachViewableObserverFn),void 0!==window.IntersectionObserver){const e={root:null,rootMargin:"0px",threshold:[.5]};this.viewableObserver=new IntersectionObserver(ir(sr,this,hr).bind(this),e),this.viewableObserver.observe(this.container)}else this.rmpVastTracking.dispatchTrackingAndApiEvent("adviewundetermined")}function pr(){this.viewableObserver&&this.viewableObserver.unobserve(this.container),this.ad.viewableImpression.forEach((e=>{e.viewable.length>0&&e.viewable.forEach((e=>{this.trackingTags.push({event:"viewable",url:e})})),e.notViewable.length>0&&e.notViewable.forEach((e=>{this.trackingTags.push({event:"notviewable",url:e})})),e.viewUndetermined.length>0&&e.viewUndetermined.forEach((e=>{this.trackingTags.push({event:"viewundetermined",url:e})}))})),this.attachViewableObserverFn=ir(sr,this,cr).bind(this),this.on("adstarted",this.attachViewableObserverFn)}async function ur(e){for(let t=0;t<e.length;t++)await new Promise((i=>{const s=e[t];if(u.print(this.debugRawConsoleLogs,"currentAd follows",s),this.ad.id=s.id,this.ad.adServingId=s.adServingId,this.ad.categories=s.categories,this.requireCategory&&(0!==this.ad.categories.length&&this.ad.categories[0].authority||(this.rmpVastUtils.processVastErrors(204,!0),i())),this.ad.blockedAdCategories=s.blockedAdCategories,this.requireCategory){let e=!1;this.ad.blockedAdCategories.forEach((t=>{const i=t.authority,s=t.value;this.ad.categories.forEach((t=>{const n=t.authority,r=t.value;i===n&&s===r&&(this.rmpVastUtils.processVastErrors(205,!0),e=!0)}))})),e&&i()}if(this.ad.adType=s.adType,this.ad.title=s.title,this.ad.description=s.description,this.ad.system=s.system,this.ad.advertiser=s.advertiser,this.ad.pricing=s.pricing,this.ad.survey=s.survey,this.ad.sequence=s.sequence,e.find((e=>(this.adPod=!1,!!(e.sequence&&e.sequence>1)&&(this.adPod=!0,!0)))),this.adPod){let t=e.reduce(((e,t)=>e.sequence>t.sequence?e:t)).sequence;if(e.forEach((e=>{null===e.sequence&&(e.sequence=t+1,t++)})),this.adSequence++,0===this.adPodLength){let t=0;e.forEach((e=>{e.sequence&&t++})),this.adPodLength=t,u.print(this.debugRawConsoleLogs,`AdPod detected with length ${this.adPodLength}`,s)}this.one("addestroyed",(()=>{this.adSequence===this.adPodLength&&(this.adPodLength=0,this.adSequence=0,this.adPod=!1,this.rmpVastUtils.createApiEvent("adpodcompleted")),i()}))}this.ad.viewableImpression=s.viewableImpression,this.ad.viewableImpression.length>0&&ir(sr,this,pr).call(this),s.errorURLTemplates.forEach((e=>{this.adErrorTags.push({event:"error",url:e})})),s.impressionURLTemplates.forEach((e=>{e.url&&this.trackingTags.push({event:"impression",url:e.url})}));const n=s.creatives;u.print(this.debugRawConsoleLogs,"Parsed creatives follow",n),n.find((e=>"companion"===e.type&&(u.print(this.debugRawConsoleLogs,"Creative type companion detected"),this.rmpVastCompanionCreative.parse(e),!0)));for(let e=0;e<n.length;e++){const t=n[e];if("companion"!==t.type)switch(this.creative.id=t.id,this.creative.universalAdIds=t.universalAdIds,this.creative.adId=t.adId,this.creative.trackingEvents=t.trackingEvents,t.type){case"linear":this.creative.duration=t.duration,this.creative.skipDelay=t.skipDelay,this.creative.skipDelay&&(this.creative.skipoffset=t.skipDelay,this.creative.isSkippableAd=!0),t.videoClickThroughURLTemplate&&t.videoClickThroughURLTemplate.url&&(this.creative.clickThroughUrl=t.videoClickThroughURLTemplate.url),t.videoClickTrackingURLTemplates.length>0&&t.videoClickTrackingURLTemplates.forEach((e=>{e.url&&this.trackingTags.push({event:"clickthrough",url:e.url})})),this.creative.isLinear=!0,t.interactiveCreativeFile&&/simid/i.test(t.interactiveCreativeFile.apiFramework)&&/text\/html/i.test(t.interactiveCreativeFile.type)&&(this.creative.simid={fileURL:t.interactiveCreativeFile.fileURL,variableDuration:t.interactiveCreativeFile.variableDuration},t.adParameters&&t.adParameters.value&&(this.creative.simid.adParameters=t.adParameters.value)),ir(sr,this,dr).call(this,t.trackingEvents),this.rmpVastLinearCreative=new gi(this),this.rmpVastLinearCreative.parse(t),this.params.omidSupport&&s.adVerifications.length>0&&new xs(s.adVerifications,this).init();break;case"nonlinear":this.creative.isLinear=!1,ir(sr,this,dr).call(this,t.trackingEvents),this.rmpVastNonLinearCreative=new qi(this),this.rmpVastNonLinearCreative.parse(t.variations)}}}))}function mr(e){u.print(this.debugRawConsoleLogs,"VAST response follows",e),e.errorURLTemplates.length>0&&e.errorURLTemplates.forEach((e=>{this.vastErrorTags.push({event:"error",url:e})})),0!==e.ads.length?ir(sr,this,ur).call(this,e.ads):this.rmpVastUtils.processVastErrors(303,!0)}function gr(e){if("string"==typeof e&&""!==e)if("undefined"!=typeof DOMParser)if(this.rmpVastUtils.createApiEvent("adtagstartloading"),this.params.vastXmlInput){let t;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){return console.warn(e),void this.rmpVastUtils.processVastErrors(900,!0)}(new Fn).parseVAST(t).then((e=>{this.rmpVastUtils.createApiEvent("adtagloaded"),ir(sr,this,mr).call(this,e)})).catch((e=>{console.warn(e),this.rmpVastUtils.processVastErrors(900,!0)}))}else{const t=new Fn,i={timeout:this.params.ajaxTimeout,withCredentials:this.params.ajaxWithCredentials,wrapperLimit:this.params.maxNumRedirects,resolveAll:!1,allowMultipleAds:!0};this.__adTagUrl=e,u.print(this.debugRawConsoleLogs,`Try to load VAST tag at: ${this.__adTagUrl}`),t.get(this.__adTagUrl,i).then((e=>{this.rmpVastUtils.createApiEvent("adtagloaded"),ir(sr,this,mr).call(this,e)})).catch((e=>{console.warn(e),this.rmpVastUtils.processVastErrors(900,!0)}))}else this.rmpVastUtils.processVastErrors(1002,!1);else this.rmpVastUtils.processVastErrors(1001,!1)}export{nr as default};
//# sourceMappingURL=rmp-vast.esm.js.map